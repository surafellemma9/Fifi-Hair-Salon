-- Copy and paste this SQL into Supabase SQL Editor

CREATE TABLE IF NOT EXISTS appointments (
  id TEXT PRIMARY KEY,
  "firstName" TEXT NOT NULL,
  "lastName" TEXT NOT NULL,
  service TEXT NOT NULL,
  "servicePrice" REAL NOT NULL,
  date TEXT NOT NULL,
  time TEXT NOT NULL,
  phone TEXT NOT NULL,
  email TEXT NOT NULL,
  notes TEXT,
  status TEXT NOT NULL DEFAULT 'scheduled',
  "createdAt" TEXT NOT NULL DEFAULT (NOW()::text),
  "updatedAt" TEXT NOT NULL DEFAULT (NOW()::text)
);

CREATE INDEX IF NOT EXISTS idx_appointments_date ON appointments(date);
CREATE INDEX IF NOT EXISTS idx_appointments_status ON appointments(status);
CREATE INDEX IF NOT EXISTS idx_appointments_email ON appointments(email);

ALTER TABLE appointments ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Allow all operations" ON appointments FOR ALL USING (true) WITH CHECK (true);
