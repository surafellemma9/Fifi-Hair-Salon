"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/stats/route";
exports.ids = ["app/api/admin/stats/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fstats%2Froute&page=%2Fapi%2Fadmin%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fstats%2Froute.ts&appDir=%2FUsers%2Fsurafellemma%2FDesktop%2FFifi%20Hair%20Salon%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurafellemma%2FDesktop%2FFifi%20Hair%20Salon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fstats%2Froute&page=%2Fapi%2Fadmin%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fstats%2Froute.ts&appDir=%2FUsers%2Fsurafellemma%2FDesktop%2FFifi%20Hair%20Salon%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurafellemma%2FDesktop%2FFifi%20Hair%20Salon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_surafellemma_Desktop_Fifi_Hair_Salon_app_api_admin_stats_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/stats/route.ts */ \"(rsc)/./app/api/admin/stats/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/stats/route\",\n        pathname: \"/api/admin/stats\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/stats/route\"\n    },\n    resolvedPagePath: \"/Users/surafellemma/Desktop/Fifi Hair Salon/app/api/admin/stats/route.ts\",\n    nextConfigOutput,\n    userland: _Users_surafellemma_Desktop_Fifi_Hair_Salon_app_api_admin_stats_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/stats/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRnN0YXRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhZG1pbiUyRnN0YXRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWRtaW4lMkZzdGF0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnN1cmFmZWxsZW1tYSUyRkRlc2t0b3AlMkZGaWZpJTIwSGFpciUyMFNhbG9uJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnN1cmFmZWxsZW1tYSUyRkRlc2t0b3AlMkZGaWZpJTIwSGFpciUyMFNhbG9uJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QjtBQUNyRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpZmktaGFpci1zYWxvbi8/OWMzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc3VyYWZlbGxlbW1hL0Rlc2t0b3AvRmlmaSBIYWlyIFNhbG9uL2FwcC9hcGkvYWRtaW4vc3RhdHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL3N0YXRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vc3RhdHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FkbWluL3N0YXRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3N1cmFmZWxsZW1tYS9EZXNrdG9wL0ZpZmkgSGFpciBTYWxvbi9hcHAvYXBpL2FkbWluL3N0YXRzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hZG1pbi9zdGF0cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fstats%2Froute&page=%2Fapi%2Fadmin%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fstats%2Froute.ts&appDir=%2FUsers%2Fsurafellemma%2FDesktop%2FFifi%20Hair%20Salon%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurafellemma%2FDesktop%2FFifi%20Hair%20Salon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/admin/stats/route.ts":
/*!**************************************!*\
  !*** ./app/api/admin/stats/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _lib_database_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database-manager */ \"(rsc)/./lib/database-manager.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n\n// Initialize database manager (auto-switches between SQLite and Supabase)\nconst db = _lib_database_manager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\nasync function GET(request) {\n    try {\n        // Get appointment statistics\n        const stats = await Promise.resolve(db.getStats());\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            stats\n        });\n    } catch (error) {\n        console.error(\"Error fetching statistics:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            error: \"Failed to fetch statistics\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FkbWluL3N0YXRzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyRDtBQUNKO0FBRXZELDBFQUEwRTtBQUMxRSxNQUFNRSxLQUFLRiw2REFBc0JBLENBQUNHLFdBQVc7QUFFdEMsZUFBZUMsSUFBSUMsT0FBb0I7SUFDN0MsSUFBSTtRQUNILDZCQUE2QjtRQUM3QixNQUFNQyxRQUFRLE1BQU1DLFFBQVFDLE9BQU8sQ0FBQ04sR0FBR08sUUFBUTtRQUUvQyxPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQ3hCSjtRQUNEO0lBRUQsRUFBRSxPQUFPSyxPQUFPO1FBQ2ZDLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU9WLHFEQUFZQSxDQUFDUyxJQUFJLENBQ3ZCO1lBQUVDLE9BQU87UUFBNkIsR0FDdEM7WUFBRUUsUUFBUTtRQUFJO0lBRWhCO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maWZpLWhhaXItc2Fsb24vLi9hcHAvYXBpL2FkbWluL3N0YXRzL3JvdXRlLnRzPzgzNzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVuaWZpZWREYXRhYmFzZU1hbmFnZXIgZnJvbSAnQC9saWIvZGF0YWJhc2UtbWFuYWdlcidcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBtYW5hZ2VyIChhdXRvLXN3aXRjaGVzIGJldHdlZW4gU1FMaXRlIGFuZCBTdXBhYmFzZSlcbmNvbnN0IGRiID0gVW5pZmllZERhdGFiYXNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcblx0dHJ5IHtcblx0XHQvLyBHZXQgYXBwb2ludG1lbnQgc3RhdGlzdGljc1xuXHRcdGNvbnN0IHN0YXRzID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGRiLmdldFN0YXRzKCkpXG5cdFx0XG5cdFx0cmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG5cdFx0XHRzdGF0c1xuXHRcdH0pXG5cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzdGF0aXN0aWNzOicsIGVycm9yKVxuXHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcblx0XHRcdHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggc3RhdGlzdGljcycgfSxcblx0XHRcdHsgc3RhdHVzOiA1MDAgfVxuXHRcdClcblx0fVxufVxuIl0sIm5hbWVzIjpbIlVuaWZpZWREYXRhYmFzZU1hbmFnZXIiLCJOZXh0UmVzcG9uc2UiLCJkYiIsImdldEluc3RhbmNlIiwiR0VUIiwicmVxdWVzdCIsInN0YXRzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXRTdGF0cyIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/stats/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database-manager.ts":
/*!*********************************!*\
  !*** ./lib/database-manager.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./database */ \"(rsc)/./lib/database.ts\");\n/* harmony import */ var _database_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./database-supabase */ \"(rsc)/./lib/database-supabase.ts\");\n\n\n// Unified database manager that switches between SQLite and Supabase\nclass UnifiedDatabaseManager {\n    constructor(){\n        // Check if Supabase credentials are available\n        const useSupabase = process.env.USE_SUPABASE === \"true\" && process.env.SUPABASE_URL && process.env.SUPABASE_ANON_KEY;\n        if (useSupabase) {\n            console.log(\"\\uD83D\\uDCCA Using Supabase (Production database)\");\n            this.db = _database_supabase__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n            this.isSupabase = true;\n        } else {\n            console.log(\"\\uD83D\\uDCE6 Using SQLite (Development database)\");\n            this.db = _database__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n            this.isSupabase = false;\n        }\n    }\n    static getInstance() {\n        if (!UnifiedDatabaseManager.instance) {\n            UnifiedDatabaseManager.instance = new UnifiedDatabaseManager();\n        }\n        return UnifiedDatabaseManager.instance;\n    }\n    // Wrapper methods that handle both sync and async\n    getAppointments(filters) {\n        if (this.isSupabase) {\n            return this.db.getAppointments(filters);\n        } else {\n            return this.db.getAppointments(filters);\n        }\n    }\n    getAppointmentById(id) {\n        if (this.isSupabase) {\n            return this.db.getAppointmentById(id);\n        } else {\n            return this.db.getAppointmentById(id);\n        }\n    }\n    createAppointment(data) {\n        if (this.isSupabase) {\n            return this.db.createAppointment(data);\n        } else {\n            return this.db.createAppointment(data);\n        }\n    }\n    updateAppointment(id, data) {\n        if (this.isSupabase) {\n            return this.db.updateAppointment(id, data);\n        } else {\n            return this.db.updateAppointment(id, data);\n        }\n    }\n    updateAppointmentStatus(id, status) {\n        if (this.isSupabase) {\n            return this.db.updateAppointmentStatus(id, status);\n        } else {\n            return this.db.updateAppointmentStatus(id, status);\n        }\n    }\n    deleteAppointment(id) {\n        if (this.isSupabase) {\n            return this.db.deleteAppointment(id);\n        } else {\n            return this.db.deleteAppointment(id);\n        }\n    }\n    getStats() {\n        if (this.isSupabase) {\n            return this.db.getStats();\n        } else {\n            return this.db.getStats();\n        }\n    }\n    close() {\n        if (!this.isSupabase) {\n            this.db.close();\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UnifiedDatabaseManager);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGO0lBRU9DLFFBQWM7UUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQ2IsVUFBVSxFQUFFO1lBQ3BCLElBQUksQ0FBQ0YsRUFBRSxDQUFDZSxLQUFLO1FBQ2Y7SUFDRjtBQUNGO0FBRUEsaUVBQWV4QixzQkFBc0JBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maWZpLWhhaXItc2Fsb24vLi9saWIvZGF0YWJhc2UtbWFuYWdlci50cz8yYWNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEYXRhYmFzZU1hbmFnZXIgZnJvbSAnLi9kYXRhYmFzZSdcbmltcG9ydCBTdXBhYmFzZURhdGFiYXNlTWFuYWdlciBmcm9tICcuL2RhdGFiYXNlLXN1cGFiYXNlJ1xuaW1wb3J0IHsgQXBwb2ludG1lbnQgfSBmcm9tICcuL2RhdGFiYXNlJ1xuXG4vLyBVbmlmaWVkIGRhdGFiYXNlIG1hbmFnZXIgdGhhdCBzd2l0Y2hlcyBiZXR3ZWVuIFNRTGl0ZSBhbmQgU3VwYWJhc2VcbmNsYXNzIFVuaWZpZWREYXRhYmFzZU1hbmFnZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogVW5pZmllZERhdGFiYXNlTWFuYWdlclxuICBwcml2YXRlIGRiOiBhbnlcbiAgcHJpdmF0ZSBpc1N1cGFiYXNlOiBib29sZWFuXG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBDaGVjayBpZiBTdXBhYmFzZSBjcmVkZW50aWFscyBhcmUgYXZhaWxhYmxlXG4gICAgY29uc3QgdXNlU3VwYWJhc2UgPSBwcm9jZXNzLmVudi5VU0VfU1VQQUJBU0UgPT09ICd0cnVlJyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMICYmIFxuICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5TVVBBQkFTRV9BTk9OX0tFWVxuXG4gICAgaWYgKHVzZVN1cGFiYXNlKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+TiiBVc2luZyBTdXBhYmFzZSAoUHJvZHVjdGlvbiBkYXRhYmFzZSknKVxuICAgICAgdGhpcy5kYiA9IFN1cGFiYXNlRGF0YWJhc2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICAgIHRoaXMuaXNTdXBhYmFzZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk6YgVXNpbmcgU1FMaXRlIChEZXZlbG9wbWVudCBkYXRhYmFzZSknKVxuICAgICAgdGhpcy5kYiA9IERhdGFiYXNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICB0aGlzLmlzU3VwYWJhc2UgPSBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVW5pZmllZERhdGFiYXNlTWFuYWdlciB7XG4gICAgaWYgKCFVbmlmaWVkRGF0YWJhc2VNYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICBVbmlmaWVkRGF0YWJhc2VNYW5hZ2VyLmluc3RhbmNlID0gbmV3IFVuaWZpZWREYXRhYmFzZU1hbmFnZXIoKVxuICAgIH1cbiAgICByZXR1cm4gVW5pZmllZERhdGFiYXNlTWFuYWdlci5pbnN0YW5jZVxuICB9XG5cbiAgLy8gV3JhcHBlciBtZXRob2RzIHRoYXQgaGFuZGxlIGJvdGggc3luYyBhbmQgYXN5bmNcbiAgcHVibGljIGdldEFwcG9pbnRtZW50cyhmaWx0ZXJzPzogeyBkYXRlPzogc3RyaW5nOyBzdGF0dXM/OiBzdHJpbmcgfSk6IEFwcG9pbnRtZW50W10gfCBQcm9taXNlPEFwcG9pbnRtZW50W10+IHtcbiAgICBpZiAodGhpcy5pc1N1cGFiYXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYi5nZXRBcHBvaW50bWVudHMoZmlsdGVycylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0QXBwb2ludG1lbnRzKGZpbHRlcnMpXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEFwcG9pbnRtZW50QnlJZChpZDogc3RyaW5nKTogQXBwb2ludG1lbnQgfCBudWxsIHwgUHJvbWlzZTxBcHBvaW50bWVudCB8IG51bGw+IHtcbiAgICBpZiAodGhpcy5pc1N1cGFiYXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYi5nZXRBcHBvaW50bWVudEJ5SWQoaWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmRiLmdldEFwcG9pbnRtZW50QnlJZChpZClcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlQXBwb2ludG1lbnQoZGF0YTogT21pdDxBcHBvaW50bWVudCwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogeyBzdWNjZXNzOiBib29sZWFuOyBhcHBvaW50bWVudD86IEFwcG9pbnRtZW50OyBlcnJvcnM/OiBzdHJpbmdbXSB9IHwgUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGFwcG9pbnRtZW50PzogQXBwb2ludG1lbnQ7IGVycm9ycz86IHN0cmluZ1tdIH0+IHtcbiAgICBpZiAodGhpcy5pc1N1cGFiYXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYi5jcmVhdGVBcHBvaW50bWVudChkYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5kYi5jcmVhdGVBcHBvaW50bWVudChkYXRhKVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVBcHBvaW50bWVudChpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPE9taXQ8QXBwb2ludG1lbnQsICdpZCcgfCAnY3JlYXRlZEF0Jz4+KTogeyBzdWNjZXNzOiBib29sZWFuOyBhcHBvaW50bWVudD86IEFwcG9pbnRtZW50OyBlcnJvcnM/OiBzdHJpbmdbXSB9IHwgUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGFwcG9pbnRtZW50PzogQXBwb2ludG1lbnQ7IGVycm9ycz86IHN0cmluZ1tdIH0+IHtcbiAgICBpZiAodGhpcy5pc1N1cGFiYXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYi51cGRhdGVBcHBvaW50bWVudChpZCwgZGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZGIudXBkYXRlQXBwb2ludG1lbnQoaWQsIGRhdGEpXG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZUFwcG9pbnRtZW50U3RhdHVzKGlkOiBzdHJpbmcsIHN0YXR1czogJ3NjaGVkdWxlZCcgfCAnY29tcGxldGVkJyB8ICdjYW5jZWxsZWQnIHwgJ25vLXNob3cnKTogeyBzdWNjZXNzOiBib29sZWFuOyBhcHBvaW50bWVudD86IEFwcG9pbnRtZW50OyBlcnJvcnM/OiBzdHJpbmdbXSB9IHwgUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGFwcG9pbnRtZW50PzogQXBwb2ludG1lbnQ7IGVycm9ycz86IHN0cmluZ1tdIH0+IHtcbiAgICBpZiAodGhpcy5pc1N1cGFiYXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYi51cGRhdGVBcHBvaW50bWVudFN0YXR1cyhpZCwgc3RhdHVzKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5kYi51cGRhdGVBcHBvaW50bWVudFN0YXR1cyhpZCwgc3RhdHVzKVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVBcHBvaW50bWVudChpZDogc3RyaW5nKTogeyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcnM/OiBzdHJpbmdbXSB9IHwgUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9ycz86IHN0cmluZ1tdIH0+IHtcbiAgICBpZiAodGhpcy5pc1N1cGFiYXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYi5kZWxldGVBcHBvaW50bWVudChpZClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZGIuZGVsZXRlQXBwb2ludG1lbnQoaWQpXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldFN0YXRzKCk6IHsgXG4gICAgdG90YWw6IG51bWJlcjsgXG4gICAgdG9kYXk6IG51bWJlcjsgXG4gICAgdGhpc1dlZWs6IG51bWJlcjsgXG4gICAgYnlTdGF0dXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gICAgdG90YWxSZXZlbnVlOiBudW1iZXI7XG4gICAgdG9kYXlSZXZlbnVlOiBudW1iZXI7XG4gICAgdGhpc1dlZWtSZXZlbnVlOiBudW1iZXI7XG4gICAgcGVuZGluZ1JldmVudWU6IG51bWJlcjtcbiAgICB0b2RheVBlbmRpbmdSZXZlbnVlOiBudW1iZXI7XG4gICAgdGhpc1dlZWtQZW5kaW5nUmV2ZW51ZTogbnVtYmVyO1xuICB9IHwgUHJvbWlzZTx7IFxuICAgIHRvdGFsOiBudW1iZXI7IFxuICAgIHRvZGF5OiBudW1iZXI7IFxuICAgIHRoaXNXZWVrOiBudW1iZXI7IFxuICAgIGJ5U3RhdHVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAgIHRvdGFsUmV2ZW51ZTogbnVtYmVyO1xuICAgIHRvZGF5UmV2ZW51ZTogbnVtYmVyO1xuICAgIHRoaXNXZWVrUmV2ZW51ZTogbnVtYmVyO1xuICAgIHBlbmRpbmdSZXZlbnVlOiBudW1iZXI7XG4gICAgdG9kYXlQZW5kaW5nUmV2ZW51ZTogbnVtYmVyO1xuICAgIHRoaXNXZWVrUGVuZGluZ1JldmVudWU6IG51bWJlcjtcbiAgfT4ge1xuICAgIGlmICh0aGlzLmlzU3VwYWJhc2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmRiLmdldFN0YXRzKClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0U3RhdHMoKVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbG9zZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNTdXBhYmFzZSkge1xuICAgICAgdGhpcy5kYi5jbG9zZSgpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVuaWZpZWREYXRhYmFzZU1hbmFnZXJcblxuIl0sIm5hbWVzIjpbIkRhdGFiYXNlTWFuYWdlciIsIlN1cGFiYXNlRGF0YWJhc2VNYW5hZ2VyIiwiVW5pZmllZERhdGFiYXNlTWFuYWdlciIsInVzZVN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIlVTRV9TVVBBQkFTRSIsIlNVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImxvZyIsImRiIiwiZ2V0SW5zdGFuY2UiLCJpc1N1cGFiYXNlIiwiaW5zdGFuY2UiLCJnZXRBcHBvaW50bWVudHMiLCJmaWx0ZXJzIiwiZ2V0QXBwb2ludG1lbnRCeUlkIiwiaWQiLCJjcmVhdGVBcHBvaW50bWVudCIsImRhdGEiLCJ1cGRhdGVBcHBvaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50U3RhdHVzIiwic3RhdHVzIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJnZXRTdGF0cyIsImNsb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/database-manager.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database-supabase.ts":
/*!**********************************!*\
  !*** ./lib/database-supabase.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Service price mapping (same as SQLite version)\nconst SERVICE_PRICES = {\n    \"box-braids\": 120,\n    \"cornrows\": 80,\n    \"senegalese-twist\": 150,\n    \"goddess-braids\": 180,\n    \"dreadlocks\": 200,\n    \"hair-straightening\": 100,\n    \"weave-sewing\": 250,\n    \"wash-set\": 60,\n    \"silk-press\": 80,\n    \"afro-styling\": 70,\n    \"updo\": 90,\n    \"color-treatment\": 150,\n    \"hair-cut\": 50,\n    \"trim\": 25,\n    \"deep-conditioning\": 40,\n    \"blowout\": 45,\n    \"braid-removal\": 30,\n    \"hair-consultation\": 25\n};\n// Supabase Database Manager\nclass SupabaseDatabaseManager {\n    constructor(){\n        const supabaseUrl = process.env.SUPABASE_URL;\n        const supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY;\n        if (!supabaseUrl || !supabaseKey) {\n            throw new Error(\"Supabase URL and Key must be set in environment variables\");\n        }\n        this.supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n    }\n    static getInstance() {\n        if (!SupabaseDatabaseManager.instance) {\n            SupabaseDatabaseManager.instance = new SupabaseDatabaseManager();\n        }\n        return SupabaseDatabaseManager.instance;\n    }\n    getServicePrice(serviceName) {\n        const normalizedService = serviceName.toLowerCase().replace(/\\s+/g, \"-\");\n        return SERVICE_PRICES[normalizedService] || 0;\n    }\n    validateAppointment(data) {\n        const errors = [];\n        if (data.firstName && (data.firstName.length === 0 || data.firstName.length > 50)) {\n            errors.push(\"First name must be between 1 and 50 characters\");\n        }\n        if (data.lastName && (data.lastName.length === 0 || data.lastName.length > 50)) {\n            errors.push(\"Last name must be between 1 and 50 characters\");\n        }\n        if (data.service && (data.service.length === 0 || data.service.length > 100)) {\n            errors.push(\"Service must be between 1 and 100 characters\");\n        }\n        if (data.servicePrice !== undefined && (data.servicePrice < 0 || data.servicePrice > 10000)) {\n            errors.push(\"Service price must be between $0 and $10,000\");\n        }\n        if (data.date && !/^\\d{4}-\\d{2}-\\d{2}$/.test(data.date)) {\n            errors.push(\"Date must be in YYYY-MM-DD format\");\n        }\n        if (data.time && !/^\\d{1,2}:\\d{2} [AP]M$/.test(data.time)) {\n            errors.push(\"Time must be in H:MM AM/PM or HH:MM AM/PM format\");\n        }\n        if (data.phone && (data.phone.length < 10 || data.phone.length > 20)) {\n            errors.push(\"Phone must be between 10 and 20 characters\");\n        }\n        if (data.email && (!data.email.includes(\"@\") || data.email.length > 100)) {\n            errors.push(\"Email must be valid and under 100 characters\");\n        }\n        if (data.notes && data.notes.length > 500) {\n            errors.push(\"Notes must be under 500 characters\");\n        }\n        if (data.status && ![\n            \"scheduled\",\n            \"completed\",\n            \"cancelled\",\n            \"no-show\"\n        ].includes(data.status)) {\n            errors.push(\"Status must be one of: scheduled, completed, cancelled, no-show\");\n        }\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n    // Get all appointments with optional filtering\n    async getAppointments(filters) {\n        try {\n            let query = this.supabase.from(\"appointments\").select(\"*\");\n            if (filters?.date) {\n                query = query.eq(\"date\", filters.date);\n            }\n            if (filters?.status) {\n                query = query.eq(\"status\", filters.status);\n            }\n            const { data, error } = await query.order(\"date\", {\n                ascending: true\n            }).order(\"time\", {\n                ascending: true\n            });\n            if (error) throw error;\n            return data || [];\n        } catch (error) {\n            console.error(\"Error fetching appointments:\", error);\n            return [];\n        }\n    }\n    // Get appointment by ID\n    async getAppointmentById(id) {\n        try {\n            const { data, error } = await this.supabase.from(\"appointments\").select(\"*\").eq(\"id\", id).single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching appointment:\", error);\n            return null;\n        }\n    }\n    // Create new appointment\n    async createAppointment(data) {\n        const validation = this.validateAppointment(data);\n        if (!validation.isValid) {\n            return {\n                success: false,\n                errors: validation.errors\n            };\n        }\n        const id = Date.now().toString() + Math.random().toString(36).substr(2, 9);\n        const now = new Date().toISOString();\n        const appointmentData = {\n            id,\n            firstName: data.firstName.trim(),\n            lastName: data.lastName.trim(),\n            service: data.service.trim(),\n            servicePrice: data.servicePrice || this.getServicePrice(data.service),\n            date: data.date,\n            time: data.time,\n            phone: data.phone.trim(),\n            email: data.email.trim(),\n            notes: data.notes?.trim() || null,\n            status: data.status || \"scheduled\",\n            createdAt: now,\n            updatedAt: now\n        };\n        try {\n            const { data: result, error } = await this.supabase.from(\"appointments\").insert([\n                appointmentData\n            ]).select().single();\n            if (error) throw error;\n            return {\n                success: true,\n                appointment: result\n            };\n        } catch (error) {\n            console.error(\"Error creating appointment:\", error);\n            return {\n                success: false,\n                errors: [\n                    \"Failed to create appointment\"\n                ]\n            };\n        }\n    }\n    // Update appointment\n    async updateAppointment(id, data) {\n        const validation = this.validateAppointment(data);\n        if (!validation.isValid) {\n            return {\n                success: false,\n                errors: validation.errors\n            };\n        }\n        const updateData = {\n            ...data,\n            updatedAt: new Date().toISOString()\n        };\n        // Sanitize string fields\n        if (data.firstName) updateData.firstName = data.firstName.trim();\n        if (data.lastName) updateData.lastName = data.lastName.trim();\n        if (data.service) updateData.service = data.service.trim();\n        if (data.phone) updateData.phone = data.phone.trim();\n        if (data.email) updateData.email = data.email.trim();\n        if (data.notes) updateData.notes = data.notes.trim();\n        try {\n            const { data: result, error } = await this.supabase.from(\"appointments\").update(updateData).eq(\"id\", id).select().single();\n            if (error) throw error;\n            if (!result) {\n                return {\n                    success: false,\n                    errors: [\n                        \"Appointment not found\"\n                    ]\n                };\n            }\n            return {\n                success: true,\n                appointment: result\n            };\n        } catch (error) {\n            console.error(\"Error updating appointment:\", error);\n            return {\n                success: false,\n                errors: [\n                    \"Failed to update appointment\"\n                ]\n            };\n        }\n    }\n    // Update appointment status only\n    async updateAppointmentStatus(id, status) {\n        try {\n            const { data: result, error } = await this.supabase.from(\"appointments\").update({\n                status,\n                updatedAt: new Date().toISOString()\n            }).eq(\"id\", id).select().single();\n            if (error) throw error;\n            if (!result) {\n                return {\n                    success: false,\n                    errors: [\n                        \"Appointment not found\"\n                    ]\n                };\n            }\n            return {\n                success: true,\n                appointment: result\n            };\n        } catch (error) {\n            console.error(\"Error updating appointment status:\", error);\n            return {\n                success: false,\n                errors: [\n                    \"Failed to update appointment status\"\n                ]\n            };\n        }\n    }\n    // Delete appointment\n    async deleteAppointment(id) {\n        try {\n            const { error } = await this.supabase.from(\"appointments\").delete().eq(\"id\", id);\n            if (error) throw error;\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(\"Error deleting appointment:\", error);\n            return {\n                success: false,\n                errors: [\n                    \"Failed to delete appointment\"\n                ]\n            };\n        }\n    }\n    // Get appointment statistics\n    async getStats() {\n        try {\n            const today = new Date().toISOString().split(\"T\")[0];\n            const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0];\n            // Get all appointments\n            const { data: allAppointments, error: allError } = await this.supabase.from(\"appointments\").select(\"*\");\n            if (allError) throw allError;\n            // Calculate stats\n            const total = allAppointments?.length || 0;\n            const todayCount = allAppointments?.filter((a)=>a.date === today).length || 0;\n            const thisWeekCount = allAppointments?.filter((a)=>a.date >= weekAgo).length || 0;\n            const byStatus = allAppointments?.reduce((acc, apt)=>{\n                acc[apt.status] = (acc[apt.status] || 0) + 1;\n                return acc;\n            }, {}) || {};\n            const completedAppointments = allAppointments?.filter((a)=>a.status === \"completed\") || [];\n            const scheduledAppointments = allAppointments?.filter((a)=>a.status === \"scheduled\") || [];\n            const totalRevenue = completedAppointments.reduce((sum, apt)=>sum + (apt.servicePrice || 0), 0);\n            const todayRevenue = completedAppointments.filter((a)=>a.date === today).reduce((sum, apt)=>sum + (apt.servicePrice || 0), 0);\n            const thisWeekRevenue = completedAppointments.filter((a)=>a.date >= weekAgo).reduce((sum, apt)=>sum + (apt.servicePrice || 0), 0);\n            const pendingRevenue = scheduledAppointments.reduce((sum, apt)=>sum + (apt.servicePrice || 0), 0);\n            const todayPendingRevenue = scheduledAppointments.filter((a)=>a.date === today).reduce((sum, apt)=>sum + (apt.servicePrice || 0), 0);\n            const thisWeekPendingRevenue = scheduledAppointments.filter((a)=>a.date >= weekAgo).reduce((sum, apt)=>sum + (apt.servicePrice || 0), 0);\n            return {\n                total,\n                today: todayCount,\n                thisWeek: thisWeekCount,\n                byStatus,\n                totalRevenue,\n                todayRevenue,\n                thisWeekRevenue,\n                pendingRevenue,\n                todayPendingRevenue,\n                thisWeekPendingRevenue\n            };\n        } catch (error) {\n            console.error(\"Error fetching stats:\", error);\n            return {\n                total: 0,\n                today: 0,\n                thisWeek: 0,\n                byStatus: {},\n                totalRevenue: 0,\n                todayRevenue: 0,\n                thisWeekRevenue: 0,\n                pendingRevenue: 0,\n                todayPendingRevenue: 0,\n                thisWeekPendingRevenue: 0\n            };\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SupabaseDatabaseManager);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS0osTUFBUUksTUFBT0osQ0FBQUEsSUFBSTdELFlBQVksSUFBSSxJQUFJO1lBRWpJLE1BQU1vRSxpQkFBaUJMLHNCQUFzQkosTUFBTSxDQUFDLENBQUNNLEtBQUtKLE1BQVFJLE1BQU9KLENBQUFBLElBQUk3RCxZQUFZLElBQUksSUFBSTtZQUNqRyxNQUFNcUUsc0JBQXNCTixzQkFBc0JSLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRXRELElBQUksS0FBSzhDLE9BQU9XLE1BQU0sQ0FBQyxDQUFDTSxLQUFLSixNQUFRSSxNQUFPSixDQUFBQSxJQUFJN0QsWUFBWSxJQUFJLElBQUk7WUFDcEksTUFBTXNFLHlCQUF5QlAsc0JBQXNCUixNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUV0RCxJQUFJLElBQUlnRCxTQUFTUyxNQUFNLENBQUMsQ0FBQ00sS0FBS0osTUFBUUksTUFBT0osQ0FBQUEsSUFBSTdELFlBQVksSUFBSSxJQUFJO1lBRXhJLE9BQU87Z0JBQ0xxRDtnQkFDQUwsT0FBT007Z0JBQ1BpQixVQUFVZDtnQkFDVkM7Z0JBQ0FNO2dCQUNBRTtnQkFDQUM7Z0JBQ0FDO2dCQUNBQztnQkFDQUM7WUFDRjtRQUNGLEVBQUUsT0FBT3JELE9BQU87WUFDZEcsUUFBUUgsS0FBSyxDQUFDLHlCQUF5QkE7WUFDdkMsT0FBTztnQkFDTG9DLE9BQU87Z0JBQ1BMLE9BQU87Z0JBQ1B1QixVQUFVO2dCQUNWYixVQUFVLENBQUM7Z0JBQ1hNLGNBQWM7Z0JBQ2RFLGNBQWM7Z0JBQ2RDLGlCQUFpQjtnQkFDakJDLGdCQUFnQjtnQkFDaEJDLHFCQUFxQjtnQkFDckJDLHdCQUF3QjtZQUMxQjtRQUNGO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlL0YsdUJBQXVCQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlmaS1oYWlyLXNhbG9uLy4vbGliL2RhdGFiYXNlLXN1cGFiYXNlLnRzPzFmZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50LCBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcbmltcG9ydCB7IEFwcG9pbnRtZW50IH0gZnJvbSAnLi9kYXRhYmFzZSdcblxuLy8gU2VydmljZSBwcmljZSBtYXBwaW5nIChzYW1lIGFzIFNRTGl0ZSB2ZXJzaW9uKVxuY29uc3QgU0VSVklDRV9QUklDRVM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICdib3gtYnJhaWRzJzogMTIwLFxuICAnY29ybnJvd3MnOiA4MCxcbiAgJ3NlbmVnYWxlc2UtdHdpc3QnOiAxNTAsXG4gICdnb2RkZXNzLWJyYWlkcyc6IDE4MCxcbiAgJ2RyZWFkbG9ja3MnOiAyMDAsXG4gICdoYWlyLXN0cmFpZ2h0ZW5pbmcnOiAxMDAsXG4gICd3ZWF2ZS1zZXdpbmcnOiAyNTAsXG4gICd3YXNoLXNldCc6IDYwLFxuICAnc2lsay1wcmVzcyc6IDgwLFxuICAnYWZyby1zdHlsaW5nJzogNzAsXG4gICd1cGRvJzogOTAsXG4gICdjb2xvci10cmVhdG1lbnQnOiAxNTAsXG4gICdoYWlyLWN1dCc6IDUwLFxuICAndHJpbSc6IDI1LFxuICAnZGVlcC1jb25kaXRpb25pbmcnOiA0MCxcbiAgJ2Jsb3dvdXQnOiA0NSxcbiAgJ2JyYWlkLXJlbW92YWwnOiAzMCxcbiAgJ2hhaXItY29uc3VsdGF0aW9uJzogMjVcbn1cblxuLy8gU3VwYWJhc2UgRGF0YWJhc2UgTWFuYWdlclxuY2xhc3MgU3VwYWJhc2VEYXRhYmFzZU1hbmFnZXIge1xuICBwcml2YXRlIHN1cGFiYXNlOiBTdXBhYmFzZUNsaWVudFxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogU3VwYWJhc2VEYXRhYmFzZU1hbmFnZXJcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMXG4gICAgY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZXG5cbiAgICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBVUkwgYW5kIEtleSBtdXN0IGJlIHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKVxuICAgIH1cblxuICAgIHRoaXMuc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5KVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBTdXBhYmFzZURhdGFiYXNlTWFuYWdlciB7XG4gICAgaWYgKCFTdXBhYmFzZURhdGFiYXNlTWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgU3VwYWJhc2VEYXRhYmFzZU1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgU3VwYWJhc2VEYXRhYmFzZU1hbmFnZXIoKVxuICAgIH1cbiAgICByZXR1cm4gU3VwYWJhc2VEYXRhYmFzZU1hbmFnZXIuaW5zdGFuY2VcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2VydmljZVByaWNlKHNlcnZpY2VOYW1lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTZXJ2aWNlID0gc2VydmljZU5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICByZXR1cm4gU0VSVklDRV9QUklDRVNbbm9ybWFsaXplZFNlcnZpY2VdIHx8IDBcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVBcHBvaW50bWVudChkYXRhOiBQYXJ0aWFsPEFwcG9pbnRtZW50Pik6IHsgaXNWYWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXSB9IHtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW11cblxuICAgIGlmIChkYXRhLmZpcnN0TmFtZSAmJiAoZGF0YS5maXJzdE5hbWUubGVuZ3RoID09PSAwIHx8IGRhdGEuZmlyc3ROYW1lLmxlbmd0aCA+IDUwKSkge1xuICAgICAgZXJyb3JzLnB1c2goJ0ZpcnN0IG5hbWUgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDUwIGNoYXJhY3RlcnMnKVxuICAgIH1cblxuICAgIGlmIChkYXRhLmxhc3ROYW1lICYmIChkYXRhLmxhc3ROYW1lLmxlbmd0aCA9PT0gMCB8fCBkYXRhLmxhc3ROYW1lLmxlbmd0aCA+IDUwKSkge1xuICAgICAgZXJyb3JzLnB1c2goJ0xhc3QgbmFtZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNTAgY2hhcmFjdGVycycpXG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc2VydmljZSAmJiAoZGF0YS5zZXJ2aWNlLmxlbmd0aCA9PT0gMCB8fCBkYXRhLnNlcnZpY2UubGVuZ3RoID4gMTAwKSkge1xuICAgICAgZXJyb3JzLnB1c2goJ1NlcnZpY2UgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwMCBjaGFyYWN0ZXJzJylcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5zZXJ2aWNlUHJpY2UgIT09IHVuZGVmaW5lZCAmJiAoZGF0YS5zZXJ2aWNlUHJpY2UgPCAwIHx8IGRhdGEuc2VydmljZVByaWNlID4gMTAwMDApKSB7XG4gICAgICBlcnJvcnMucHVzaCgnU2VydmljZSBwcmljZSBtdXN0IGJlIGJldHdlZW4gJDAgYW5kICQxMCwwMDAnKVxuICAgIH1cblxuICAgIGlmIChkYXRhLmRhdGUgJiYgIS9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KGRhdGEuZGF0ZSkpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdEYXRlIG11c3QgYmUgaW4gWVlZWS1NTS1ERCBmb3JtYXQnKVxuICAgIH1cblxuICAgIGlmIChkYXRhLnRpbWUgJiYgIS9eXFxkezEsMn06XFxkezJ9IFtBUF1NJC8udGVzdChkYXRhLnRpbWUpKSB7XG4gICAgICBlcnJvcnMucHVzaCgnVGltZSBtdXN0IGJlIGluIEg6TU0gQU0vUE0gb3IgSEg6TU0gQU0vUE0gZm9ybWF0JylcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5waG9uZSAmJiAoZGF0YS5waG9uZS5sZW5ndGggPCAxMCB8fCBkYXRhLnBob25lLmxlbmd0aCA+IDIwKSkge1xuICAgICAgZXJyb3JzLnB1c2goJ1Bob25lIG11c3QgYmUgYmV0d2VlbiAxMCBhbmQgMjAgY2hhcmFjdGVycycpXG4gICAgfVxuXG4gICAgaWYgKGRhdGEuZW1haWwgJiYgKCFkYXRhLmVtYWlsLmluY2x1ZGVzKCdAJykgfHwgZGF0YS5lbWFpbC5sZW5ndGggPiAxMDApKSB7XG4gICAgICBlcnJvcnMucHVzaCgnRW1haWwgbXVzdCBiZSB2YWxpZCBhbmQgdW5kZXIgMTAwIGNoYXJhY3RlcnMnKVxuICAgIH1cblxuICAgIGlmIChkYXRhLm5vdGVzICYmIGRhdGEubm90ZXMubGVuZ3RoID4gNTAwKSB7XG4gICAgICBlcnJvcnMucHVzaCgnTm90ZXMgbXVzdCBiZSB1bmRlciA1MDAgY2hhcmFjdGVycycpXG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc3RhdHVzICYmICFbJ3NjaGVkdWxlZCcsICdjb21wbGV0ZWQnLCAnY2FuY2VsbGVkJywgJ25vLXNob3cnXS5pbmNsdWRlcyhkYXRhLnN0YXR1cykpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdTdGF0dXMgbXVzdCBiZSBvbmUgb2Y6IHNjaGVkdWxlZCwgY29tcGxldGVkLCBjYW5jZWxsZWQsIG5vLXNob3cnKVxuICAgIH1cblxuICAgIHJldHVybiB7IGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsIGVycm9ycyB9XG4gIH1cblxuICAvLyBHZXQgYWxsIGFwcG9pbnRtZW50cyB3aXRoIG9wdGlvbmFsIGZpbHRlcmluZ1xuICBwdWJsaWMgYXN5bmMgZ2V0QXBwb2ludG1lbnRzKGZpbHRlcnM/OiB7IGRhdGU/OiBzdHJpbmc7IHN0YXR1cz86IHN0cmluZyB9KTogUHJvbWlzZTxBcHBvaW50bWVudFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBxdWVyeSA9IHRoaXMuc3VwYWJhc2UuZnJvbSgnYXBwb2ludG1lbnRzJykuc2VsZWN0KCcqJylcblxuICAgICAgaWYgKGZpbHRlcnM/LmRhdGUpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZGF0ZScsIGZpbHRlcnMuZGF0ZSlcbiAgICAgIH1cblxuICAgICAgaWYgKGZpbHRlcnM/LnN0YXR1cykge1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzdGF0dXMnLCBmaWx0ZXJzLnN0YXR1cylcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnkub3JkZXIoJ2RhdGUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KS5vcmRlcigndGltZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcblxuICAgICAgcmV0dXJuIChkYXRhIGFzIEFwcG9pbnRtZW50W10pIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFwcG9pbnRtZW50czonLCBlcnJvcilcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBhcHBvaW50bWVudCBieSBJRFxuICBwdWJsaWMgYXN5bmMgZ2V0QXBwb2ludG1lbnRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPEFwcG9pbnRtZW50IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdhcHBvaW50bWVudHMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuXG4gICAgICByZXR1cm4gZGF0YSBhcyBBcHBvaW50bWVudFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhcHBvaW50bWVudDonLCBlcnJvcilcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgLy8gQ3JlYXRlIG5ldyBhcHBvaW50bWVudFxuICBwdWJsaWMgYXN5bmMgY3JlYXRlQXBwb2ludG1lbnQoZGF0YTogT21pdDxBcHBvaW50bWVudCwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGFwcG9pbnRtZW50PzogQXBwb2ludG1lbnQ7IGVycm9ycz86IHN0cmluZ1tdIH0+IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy52YWxpZGF0ZUFwcG9pbnRtZW50KGRhdGEpXG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcnM6IHZhbGlkYXRpb24uZXJyb3JzIH1cbiAgICB9XG5cbiAgICBjb25zdCBpZCA9IERhdGUubm93KCkudG9TdHJpbmcoKSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuXG4gICAgY29uc3QgYXBwb2ludG1lbnREYXRhID0ge1xuICAgICAgaWQsXG4gICAgICBmaXJzdE5hbWU6IGRhdGEuZmlyc3ROYW1lLnRyaW0oKSxcbiAgICAgIGxhc3ROYW1lOiBkYXRhLmxhc3ROYW1lLnRyaW0oKSxcbiAgICAgIHNlcnZpY2U6IGRhdGEuc2VydmljZS50cmltKCksXG4gICAgICBzZXJ2aWNlUHJpY2U6IGRhdGEuc2VydmljZVByaWNlIHx8IHRoaXMuZ2V0U2VydmljZVByaWNlKGRhdGEuc2VydmljZSksXG4gICAgICBkYXRlOiBkYXRhLmRhdGUsXG4gICAgICB0aW1lOiBkYXRhLnRpbWUsXG4gICAgICBwaG9uZTogZGF0YS5waG9uZS50cmltKCksXG4gICAgICBlbWFpbDogZGF0YS5lbWFpbC50cmltKCksXG4gICAgICBub3RlczogZGF0YS5ub3Rlcz8udHJpbSgpIHx8IG51bGwsXG4gICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzIHx8ICdzY2hlZHVsZWQnLFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICB1cGRhdGVkQXQ6IG5vd1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGE6IHJlc3VsdCwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2FwcG9pbnRtZW50cycpXG4gICAgICAgIC5pbnNlcnQoW2FwcG9pbnRtZW50RGF0YV0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBhcHBvaW50bWVudDogcmVzdWx0IGFzIEFwcG9pbnRtZW50IH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYXBwb2ludG1lbnQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3JzOiBbJ0ZhaWxlZCB0byBjcmVhdGUgYXBwb2ludG1lbnQnXSB9XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGFwcG9pbnRtZW50XG4gIHB1YmxpYyBhc3luYyB1cGRhdGVBcHBvaW50bWVudChpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPE9taXQ8QXBwb2ludG1lbnQsICdpZCcgfCAnY3JlYXRlZEF0Jz4+KTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGFwcG9pbnRtZW50PzogQXBwb2ludG1lbnQ7IGVycm9ycz86IHN0cmluZ1tdIH0+IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy52YWxpZGF0ZUFwcG9pbnRtZW50KGRhdGEpXG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcnM6IHZhbGlkYXRpb24uZXJyb3JzIH1cbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XG4gICAgICAuLi5kYXRhLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9XG5cbiAgICAvLyBTYW5pdGl6ZSBzdHJpbmcgZmllbGRzXG4gICAgaWYgKGRhdGEuZmlyc3ROYW1lKSB1cGRhdGVEYXRhLmZpcnN0TmFtZSA9IGRhdGEuZmlyc3ROYW1lLnRyaW0oKVxuICAgIGlmIChkYXRhLmxhc3ROYW1lKSB1cGRhdGVEYXRhLmxhc3ROYW1lID0gZGF0YS5sYXN0TmFtZS50cmltKClcbiAgICBpZiAoZGF0YS5zZXJ2aWNlKSB1cGRhdGVEYXRhLnNlcnZpY2UgPSBkYXRhLnNlcnZpY2UudHJpbSgpXG4gICAgaWYgKGRhdGEucGhvbmUpIHVwZGF0ZURhdGEucGhvbmUgPSBkYXRhLnBob25lLnRyaW0oKVxuICAgIGlmIChkYXRhLmVtYWlsKSB1cGRhdGVEYXRhLmVtYWlsID0gZGF0YS5lbWFpbC50cmltKClcbiAgICBpZiAoZGF0YS5ub3RlcykgdXBkYXRlRGF0YS5ub3RlcyA9IGRhdGEubm90ZXMudHJpbSgpXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhOiByZXN1bHQsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdhcHBvaW50bWVudHMnKVxuICAgICAgICAudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG5cbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcnM6IFsnQXBwb2ludG1lbnQgbm90IGZvdW5kJ10gfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBhcHBvaW50bWVudDogcmVzdWx0IGFzIEFwcG9pbnRtZW50IH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYXBwb2ludG1lbnQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3JzOiBbJ0ZhaWxlZCB0byB1cGRhdGUgYXBwb2ludG1lbnQnXSB9XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGFwcG9pbnRtZW50IHN0YXR1cyBvbmx5XG4gIHB1YmxpYyBhc3luYyB1cGRhdGVBcHBvaW50bWVudFN0YXR1cyhpZDogc3RyaW5nLCBzdGF0dXM6ICdzY2hlZHVsZWQnIHwgJ2NvbXBsZXRlZCcgfCAnY2FuY2VsbGVkJyB8ICduby1zaG93Jyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBhcHBvaW50bWVudD86IEFwcG9pbnRtZW50OyBlcnJvcnM/OiBzdHJpbmdbXSB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYXBwb2ludG1lbnRzJylcbiAgICAgICAgLnVwZGF0ZSh7IHN0YXR1cywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSlcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcblxuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yczogWydBcHBvaW50bWVudCBub3QgZm91bmQnXSB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGFwcG9pbnRtZW50OiByZXN1bHQgYXMgQXBwb2ludG1lbnQgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBhcHBvaW50bWVudCBzdGF0dXM6JywgZXJyb3IpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3JzOiBbJ0ZhaWxlZCB0byB1cGRhdGUgYXBwb2ludG1lbnQgc3RhdHVzJ10gfVxuICAgIH1cbiAgfVxuXG4gIC8vIERlbGV0ZSBhcHBvaW50bWVudFxuICBwdWJsaWMgYXN5bmMgZGVsZXRlQXBwb2ludG1lbnQoaWQ6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcnM/OiBzdHJpbmdbXSB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2FwcG9pbnRtZW50cycpXG4gICAgICAgIC5kZWxldGUoKVxuICAgICAgICAuZXEoJ2lkJywgaWQpXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGFwcG9pbnRtZW50OicsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yczogWydGYWlsZWQgdG8gZGVsZXRlIGFwcG9pbnRtZW50J10gfVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBhcHBvaW50bWVudCBzdGF0aXN0aWNzXG4gIHB1YmxpYyBhc3luYyBnZXRTdGF0cygpOiBQcm9taXNlPHsgXG4gICAgdG90YWw6IG51bWJlcjsgXG4gICAgdG9kYXk6IG51bWJlcjsgXG4gICAgdGhpc1dlZWs6IG51bWJlcjsgXG4gICAgYnlTdGF0dXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gICAgdG90YWxSZXZlbnVlOiBudW1iZXI7XG4gICAgdG9kYXlSZXZlbnVlOiBudW1iZXI7XG4gICAgdGhpc1dlZWtSZXZlbnVlOiBudW1iZXI7XG4gICAgcGVuZGluZ1JldmVudWU6IG51bWJlcjtcbiAgICB0b2RheVBlbmRpbmdSZXZlbnVlOiBudW1iZXI7XG4gICAgdGhpc1dlZWtQZW5kaW5nUmV2ZW51ZTogbnVtYmVyO1xuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cbiAgICAgIGNvbnN0IHdlZWtBZ28gPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuXG4gICAgICAvLyBHZXQgYWxsIGFwcG9pbnRtZW50c1xuICAgICAgY29uc3QgeyBkYXRhOiBhbGxBcHBvaW50bWVudHMsIGVycm9yOiBhbGxFcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYXBwb2ludG1lbnRzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG5cbiAgICAgIGlmIChhbGxFcnJvcikgdGhyb3cgYWxsRXJyb3JcblxuICAgICAgLy8gQ2FsY3VsYXRlIHN0YXRzXG4gICAgICBjb25zdCB0b3RhbCA9IGFsbEFwcG9pbnRtZW50cz8ubGVuZ3RoIHx8IDBcbiAgICAgIGNvbnN0IHRvZGF5Q291bnQgPSBhbGxBcHBvaW50bWVudHM/LmZpbHRlcihhID0+IGEuZGF0ZSA9PT0gdG9kYXkpLmxlbmd0aCB8fCAwXG4gICAgICBjb25zdCB0aGlzV2Vla0NvdW50ID0gYWxsQXBwb2ludG1lbnRzPy5maWx0ZXIoYSA9PiBhLmRhdGUgPj0gd2Vla0FnbykubGVuZ3RoIHx8IDBcblxuICAgICAgY29uc3QgYnlTdGF0dXMgPSBhbGxBcHBvaW50bWVudHM/LnJlZHVjZSgoYWNjLCBhcHQpID0+IHtcbiAgICAgICAgYWNjW2FwdC5zdGF0dXNdID0gKGFjY1thcHQuc3RhdHVzXSB8fCAwKSArIDFcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPikgfHwge31cblxuICAgICAgY29uc3QgY29tcGxldGVkQXBwb2ludG1lbnRzID0gYWxsQXBwb2ludG1lbnRzPy5maWx0ZXIoYSA9PiBhLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHx8IFtdXG4gICAgICBjb25zdCBzY2hlZHVsZWRBcHBvaW50bWVudHMgPSBhbGxBcHBvaW50bWVudHM/LmZpbHRlcihhID0+IGEuc3RhdHVzID09PSAnc2NoZWR1bGVkJykgfHwgW11cblxuICAgICAgY29uc3QgdG90YWxSZXZlbnVlID0gY29tcGxldGVkQXBwb2ludG1lbnRzLnJlZHVjZSgoc3VtLCBhcHQpID0+IHN1bSArIChhcHQuc2VydmljZVByaWNlIHx8IDApLCAwKVxuICAgICAgY29uc3QgdG9kYXlSZXZlbnVlID0gY29tcGxldGVkQXBwb2ludG1lbnRzLmZpbHRlcihhID0+IGEuZGF0ZSA9PT0gdG9kYXkpLnJlZHVjZSgoc3VtLCBhcHQpID0+IHN1bSArIChhcHQuc2VydmljZVByaWNlIHx8IDApLCAwKVxuICAgICAgY29uc3QgdGhpc1dlZWtSZXZlbnVlID0gY29tcGxldGVkQXBwb2ludG1lbnRzLmZpbHRlcihhID0+IGEuZGF0ZSA+PSB3ZWVrQWdvKS5yZWR1Y2UoKHN1bSwgYXB0KSA9PiBzdW0gKyAoYXB0LnNlcnZpY2VQcmljZSB8fCAwKSwgMClcblxuICAgICAgY29uc3QgcGVuZGluZ1JldmVudWUgPSBzY2hlZHVsZWRBcHBvaW50bWVudHMucmVkdWNlKChzdW0sIGFwdCkgPT4gc3VtICsgKGFwdC5zZXJ2aWNlUHJpY2UgfHwgMCksIDApXG4gICAgICBjb25zdCB0b2RheVBlbmRpbmdSZXZlbnVlID0gc2NoZWR1bGVkQXBwb2ludG1lbnRzLmZpbHRlcihhID0+IGEuZGF0ZSA9PT0gdG9kYXkpLnJlZHVjZSgoc3VtLCBhcHQpID0+IHN1bSArIChhcHQuc2VydmljZVByaWNlIHx8IDApLCAwKVxuICAgICAgY29uc3QgdGhpc1dlZWtQZW5kaW5nUmV2ZW51ZSA9IHNjaGVkdWxlZEFwcG9pbnRtZW50cy5maWx0ZXIoYSA9PiBhLmRhdGUgPj0gd2Vla0FnbykucmVkdWNlKChzdW0sIGFwdCkgPT4gc3VtICsgKGFwdC5zZXJ2aWNlUHJpY2UgfHwgMCksIDApXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsLFxuICAgICAgICB0b2RheTogdG9kYXlDb3VudCxcbiAgICAgICAgdGhpc1dlZWs6IHRoaXNXZWVrQ291bnQsXG4gICAgICAgIGJ5U3RhdHVzLFxuICAgICAgICB0b3RhbFJldmVudWUsXG4gICAgICAgIHRvZGF5UmV2ZW51ZSxcbiAgICAgICAgdGhpc1dlZWtSZXZlbnVlLFxuICAgICAgICBwZW5kaW5nUmV2ZW51ZSxcbiAgICAgICAgdG9kYXlQZW5kaW5nUmV2ZW51ZSxcbiAgICAgICAgdGhpc1dlZWtQZW5kaW5nUmV2ZW51ZVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzdGF0czonLCBlcnJvcilcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICB0b2RheTogMCxcbiAgICAgICAgdGhpc1dlZWs6IDAsXG4gICAgICAgIGJ5U3RhdHVzOiB7fSxcbiAgICAgICAgdG90YWxSZXZlbnVlOiAwLFxuICAgICAgICB0b2RheVJldmVudWU6IDAsXG4gICAgICAgIHRoaXNXZWVrUmV2ZW51ZTogMCxcbiAgICAgICAgcGVuZGluZ1JldmVudWU6IDAsXG4gICAgICAgIHRvZGF5UGVuZGluZ1JldmVudWU6IDAsXG4gICAgICAgIHRoaXNXZWVrUGVuZGluZ1JldmVudWU6IDBcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3VwYWJhc2VEYXRhYmFzZU1hbmFnZXJcblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsIlNFUlZJQ0VfUFJJQ0VTIiwiU3VwYWJhc2VEYXRhYmFzZU1hbmFnZXIiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJTVVBBQkFTRV9BTk9OX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiZ2V0U2VydmljZVByaWNlIiwic2VydmljZU5hbWUiLCJub3JtYWxpemVkU2VydmljZSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInZhbGlkYXRlQXBwb2ludG1lbnQiLCJkYXRhIiwiZXJyb3JzIiwiZmlyc3ROYW1lIiwibGVuZ3RoIiwicHVzaCIsImxhc3ROYW1lIiwic2VydmljZSIsInNlcnZpY2VQcmljZSIsInVuZGVmaW5lZCIsImRhdGUiLCJ0ZXN0IiwidGltZSIsInBob25lIiwiZW1haWwiLCJpbmNsdWRlcyIsIm5vdGVzIiwic3RhdHVzIiwiaXNWYWxpZCIsImdldEFwcG9pbnRtZW50cyIsImZpbHRlcnMiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImVycm9yIiwib3JkZXIiLCJhc2NlbmRpbmciLCJjb25zb2xlIiwiZ2V0QXBwb2ludG1lbnRCeUlkIiwiaWQiLCJzaW5nbGUiLCJjcmVhdGVBcHBvaW50bWVudCIsInZhbGlkYXRpb24iLCJzdWNjZXNzIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0ciIsInRvSVNPU3RyaW5nIiwiYXBwb2ludG1lbnREYXRhIiwidHJpbSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInJlc3VsdCIsImluc2VydCIsImFwcG9pbnRtZW50IiwidXBkYXRlQXBwb2ludG1lbnQiLCJ1cGRhdGVEYXRhIiwidXBkYXRlIiwidXBkYXRlQXBwb2ludG1lbnRTdGF0dXMiLCJkZWxldGVBcHBvaW50bWVudCIsImRlbGV0ZSIsImdldFN0YXRzIiwidG9kYXkiLCJzcGxpdCIsIndlZWtBZ28iLCJhbGxBcHBvaW50bWVudHMiLCJhbGxFcnJvciIsInRvdGFsIiwidG9kYXlDb3VudCIsImZpbHRlciIsImEiLCJ0aGlzV2Vla0NvdW50IiwiYnlTdGF0dXMiLCJyZWR1Y2UiLCJhY2MiLCJhcHQiLCJjb21wbGV0ZWRBcHBvaW50bWVudHMiLCJzY2hlZHVsZWRBcHBvaW50bWVudHMiLCJ0b3RhbFJldmVudWUiLCJzdW0iLCJ0b2RheVJldmVudWUiLCJ0aGlzV2Vla1JldmVudWUiLCJwZW5kaW5nUmV2ZW51ZSIsInRvZGF5UGVuZGluZ1JldmVudWUiLCJ0aGlzV2Vla1BlbmRpbmdSZXZlbnVlIiwidGhpc1dlZWsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/database-supabase.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Service price mapping\nconst SERVICE_PRICES = {\n    \"box-braids\": 120,\n    \"cornrows\": 80,\n    \"senegalese-twist\": 150,\n    \"goddess-braids\": 180,\n    \"dreadlocks\": 200,\n    \"hair-straightening\": 100,\n    \"weave-sewing\": 250,\n    \"wash-set\": 60,\n    \"silk-press\": 80,\n    \"afro-styling\": 70,\n    \"updo\": 90,\n    \"color-treatment\": 150,\n    \"hair-cut\": 50,\n    \"trim\": 25,\n    \"deep-conditioning\": 40,\n    \"blowout\": 45,\n    \"braid-removal\": 30,\n    \"hair-consultation\": 25\n};\n// Database utility class with security measures\nclass DatabaseManager {\n    constructor(){\n        // Create database in a secure location\n        const dbPath = (0,path__WEBPACK_IMPORTED_MODULE_1__.join)(process.cwd(), \"data\", \"appointments.db\");\n        // Ensure data directory exists\n        const fs = __webpack_require__(/*! fs */ \"fs\");\n        const dataDir = (0,path__WEBPACK_IMPORTED_MODULE_1__.join)(process.cwd(), \"data\");\n        if (!fs.existsSync(dataDir)) {\n            fs.mkdirSync(dataDir, {\n                recursive: true\n            });\n        }\n        // Initialize database with security settings\n        this.db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(dbPath, {\n            verbose:  true ? console.log : 0\n        });\n        // Enable WAL mode for better concurrency\n        this.db.pragma(\"journal_mode = WAL\");\n        // Enable foreign keys\n        this.db.pragma(\"foreign_keys = ON\");\n        // Set secure settings\n        this.db.pragma(\"secure_delete = ON\");\n        this.initializeTables();\n    }\n    static getInstance() {\n        if (!DatabaseManager.instance) {\n            DatabaseManager.instance = new DatabaseManager();\n        }\n        return DatabaseManager.instance;\n    }\n    initializeTables() {\n        // Create appointments table with proper constraints and security\n        const createAppointmentsTable = `\n      CREATE TABLE IF NOT EXISTS appointments (\n        id TEXT PRIMARY KEY,\n        firstName TEXT NOT NULL CHECK(length(firstName) > 0 AND length(firstName) <= 50),\n        lastName TEXT NOT NULL CHECK(length(lastName) > 0 AND length(lastName) <= 50),\n        service TEXT NOT NULL CHECK(length(service) > 0 AND length(service) <= 100),\n        servicePrice REAL NOT NULL CHECK(servicePrice >= 0),\n        date TEXT NOT NULL CHECK(date GLOB '[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]'),\n        time TEXT NOT NULL CHECK(time GLOB '[0-9]*:[0-9][0-9] [AP]M'),\n        phone TEXT NOT NULL CHECK(length(phone) >= 10 AND length(phone) <= 20),\n        email TEXT NOT NULL CHECK(email LIKE '%@%' AND length(email) <= 100),\n        notes TEXT CHECK(length(notes) <= 500),\n        status TEXT NOT NULL DEFAULT 'scheduled' CHECK(status IN ('scheduled', 'completed', 'cancelled', 'no-show')),\n        createdAt TEXT NOT NULL DEFAULT (datetime('now')),\n        updatedAt TEXT NOT NULL DEFAULT (datetime('now'))\n      )\n    `;\n        // Create index for better query performance\n        const createIndexes = `\n      CREATE INDEX IF NOT EXISTS idx_appointments_date ON appointments(date);\n      CREATE INDEX IF NOT EXISTS idx_appointments_status ON appointments(status);\n      CREATE INDEX IF NOT EXISTS idx_appointments_email ON appointments(email);\n    `;\n        // Create trigger to automatically update updatedAt\n        const createTrigger = `\n      CREATE TRIGGER IF NOT EXISTS update_appointments_updated_at\n      AFTER UPDATE ON appointments\n      BEGIN\n        UPDATE appointments SET updatedAt = datetime('now') WHERE id = NEW.id;\n      END\n    `;\n        this.db.exec(createAppointmentsTable);\n        this.db.exec(createIndexes);\n        this.db.exec(createTrigger);\n        // Check if servicePrice column exists, if not add it\n        try {\n            this.db.prepare(\"SELECT servicePrice FROM appointments LIMIT 1\").get();\n        } catch (error) {\n            // Column doesn't exist, add it\n            this.db.exec(\"ALTER TABLE appointments ADD COLUMN servicePrice REAL DEFAULT 0\");\n            console.log(\"Added servicePrice column to existing database\");\n        }\n    // Database is ready - no sample data needed\n    }\n    // Get service price from service name\n    getServicePrice(serviceName) {\n        const normalizedService = serviceName.toLowerCase().replace(/\\s+/g, \"-\");\n        return SERVICE_PRICES[normalizedService] || 0;\n    }\n    // Input validation and sanitization\n    validateAppointment(data) {\n        const errors = [];\n        if (data.firstName && (data.firstName.length === 0 || data.firstName.length > 50)) {\n            errors.push(\"First name must be between 1 and 50 characters\");\n        }\n        if (data.lastName && (data.lastName.length === 0 || data.lastName.length > 50)) {\n            errors.push(\"Last name must be between 1 and 50 characters\");\n        }\n        if (data.service && (data.service.length === 0 || data.service.length > 100)) {\n            errors.push(\"Service must be between 1 and 100 characters\");\n        }\n        if (data.servicePrice !== undefined && (data.servicePrice < 0 || data.servicePrice > 10000)) {\n            errors.push(\"Service price must be between $0 and $10,000\");\n        }\n        if (data.date && !/^\\d{4}-\\d{2}-\\d{2}$/.test(data.date)) {\n            errors.push(\"Date must be in YYYY-MM-DD format\");\n        }\n        if (data.time && !/^\\d{1,2}:\\d{2} [AP]M$/.test(data.time)) {\n            errors.push(\"Time must be in H:MM AM/PM or HH:MM AM/PM format\");\n        }\n        if (data.phone && (data.phone.length < 10 || data.phone.length > 20)) {\n            errors.push(\"Phone must be between 10 and 20 characters\");\n        }\n        if (data.email && (!data.email.includes(\"@\") || data.email.length > 100)) {\n            errors.push(\"Email must be valid and under 100 characters\");\n        }\n        if (data.notes && data.notes.length > 500) {\n            errors.push(\"Notes must be under 500 characters\");\n        }\n        if (data.status && ![\n            \"scheduled\",\n            \"completed\",\n            \"cancelled\",\n            \"no-show\"\n        ].includes(data.status)) {\n            errors.push(\"Status must be one of: scheduled, completed, cancelled, no-show\");\n        }\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n    // Sanitize input to prevent injection attacks\n    sanitizeInput(input) {\n        return input.replace(/[<>]/g, \"\") // Remove potential HTML tags\n        .replace(/['\"]/g, \"\") // Remove quotes that could break SQL\n        .trim();\n    }\n    // Get all appointments with optional filtering\n    getAppointments(filters) {\n        let query = \"SELECT * FROM appointments\";\n        const params = [];\n        const conditions = [];\n        if (filters?.date) {\n            conditions.push(\"date = ?\");\n            params.push(filters.date);\n        }\n        if (filters?.status) {\n            conditions.push(\"status = ?\");\n            params.push(filters.status);\n        }\n        if (conditions.length > 0) {\n            query += \" WHERE \" + conditions.join(\" AND \");\n        }\n        query += \" ORDER BY date ASC, time ASC\";\n        const stmt = this.db.prepare(query);\n        return stmt.all(...params);\n    }\n    // Get appointment by ID\n    getAppointmentById(id) {\n        const stmt = this.db.prepare(\"SELECT * FROM appointments WHERE id = ?\");\n        return stmt.get(id);\n    }\n    // Create new appointment\n    createAppointment(data) {\n        const validation = this.validateAppointment(data);\n        if (!validation.isValid) {\n            return {\n                success: false,\n                errors: validation.errors\n            };\n        }\n        // Sanitize inputs and set service price\n        const sanitizedData = {\n            ...data,\n            firstName: this.sanitizeInput(data.firstName),\n            lastName: this.sanitizeInput(data.lastName),\n            service: this.sanitizeInput(data.service),\n            servicePrice: data.servicePrice || this.getServicePrice(data.service),\n            phone: this.sanitizeInput(data.phone),\n            email: this.sanitizeInput(data.email),\n            notes: data.notes ? this.sanitizeInput(data.notes) : null\n        };\n        const id = Date.now().toString() + Math.random().toString(36).substr(2, 9);\n        const now = new Date().toISOString();\n        try {\n            const stmt = this.db.prepare(`\n        INSERT INTO appointments (id, firstName, lastName, service, servicePrice, date, time, phone, email, notes, status, createdAt, updatedAt)\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n      `);\n            stmt.run(id, sanitizedData.firstName, sanitizedData.lastName, sanitizedData.service, sanitizedData.servicePrice, sanitizedData.date, sanitizedData.time, sanitizedData.phone, sanitizedData.email, sanitizedData.notes, sanitizedData.status, now, now);\n            const appointment = this.getAppointmentById(id);\n            return {\n                success: true,\n                appointment: appointment\n            };\n        } catch (error) {\n            console.error(\"Database error:\", error);\n            return {\n                success: false,\n                errors: [\n                    \"Failed to create appointment\"\n                ]\n            };\n        }\n    }\n    // Update appointment\n    updateAppointment(id, data) {\n        const validation = this.validateAppointment(data);\n        if (!validation.isValid) {\n            return {\n                success: false,\n                errors: validation.errors\n            };\n        }\n        // Check if appointment exists\n        const existing = this.getAppointmentById(id);\n        if (!existing) {\n            return {\n                success: false,\n                errors: [\n                    \"Appointment not found\"\n                ]\n            };\n        }\n        // Sanitize inputs\n        const sanitizedData = {\n            ...data\n        };\n        if (data.firstName) sanitizedData.firstName = this.sanitizeInput(data.firstName);\n        if (data.lastName) sanitizedData.lastName = this.sanitizeInput(data.lastName);\n        if (data.service) sanitizedData.service = this.sanitizeInput(data.service);\n        if (data.phone) sanitizedData.phone = this.sanitizeInput(data.phone);\n        if (data.email) sanitizedData.email = this.sanitizeInput(data.email);\n        if (data.notes) sanitizedData.notes = this.sanitizeInput(data.notes);\n        try {\n            const fields = Object.keys(sanitizedData).map((key)=>`${key} = ?`).join(\", \");\n            const values = Object.values(sanitizedData);\n            const stmt = this.db.prepare(`UPDATE appointments SET ${fields} WHERE id = ?`);\n            stmt.run(...values, id);\n            const appointment = this.getAppointmentById(id);\n            return {\n                success: true,\n                appointment: appointment\n            };\n        } catch (error) {\n            console.error(\"Database error:\", error);\n            return {\n                success: false,\n                errors: [\n                    \"Failed to update appointment\"\n                ]\n            };\n        }\n    }\n    // Update appointment status only\n    updateAppointmentStatus(id, status) {\n        try {\n            const stmt = this.db.prepare(`\n        UPDATE appointments \n        SET status = ?, updatedAt = datetime('now')\n        WHERE id = ?\n      `);\n            const result = stmt.run(status, id);\n            if (result.changes === 0) {\n                return {\n                    success: false,\n                    errors: [\n                        \"Appointment not found\"\n                    ]\n                };\n            }\n            const appointment = this.getAppointmentById(id);\n            return {\n                success: true,\n                appointment: appointment\n            };\n        } catch (error) {\n            console.error(\"Database error:\", error);\n            return {\n                success: false,\n                errors: [\n                    \"Failed to update appointment status\"\n                ]\n            };\n        }\n    }\n    // Delete appointment\n    deleteAppointment(id) {\n        try {\n            const stmt = this.db.prepare(\"DELETE FROM appointments WHERE id = ?\");\n            const result = stmt.run(id);\n            if (result.changes === 0) {\n                return {\n                    success: false,\n                    errors: [\n                        \"Appointment not found\"\n                    ]\n                };\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(\"Database error:\", error);\n            return {\n                success: false,\n                errors: [\n                    \"Failed to delete appointment\"\n                ]\n            };\n        }\n    }\n    // Get appointment statistics\n    getStats() {\n        const total = this.db.prepare(\"SELECT COUNT(*) as count FROM appointments\").get();\n        const today = new Date().toISOString().split(\"T\")[0];\n        const todayCount = this.db.prepare(\"SELECT COUNT(*) as count FROM appointments WHERE date = ?\").get(today);\n        const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0];\n        const thisWeekCount = this.db.prepare(\"SELECT COUNT(*) as count FROM appointments WHERE date >= ?\").get(weekAgo);\n        const byStatus = this.db.prepare(\"SELECT status, COUNT(*) as count FROM appointments GROUP BY status\").all();\n        const statusCounts = byStatus.reduce((acc, row)=>{\n            acc[row.status] = row.count;\n            return acc;\n        }, {});\n        // Completed revenue calculations\n        const totalRevenue = this.db.prepare(\"SELECT SUM(servicePrice) as revenue FROM appointments WHERE status = ?\").get(\"completed\");\n        const todayRevenue = this.db.prepare(\"SELECT SUM(servicePrice) as revenue FROM appointments WHERE date = ? AND status = ?\").get(today, \"completed\");\n        const thisWeekRevenue = this.db.prepare(\"SELECT SUM(servicePrice) as revenue FROM appointments WHERE date >= ? AND status = ?\").get(weekAgo, \"completed\");\n        // Pending revenue calculations (scheduled appointments)\n        const pendingRevenue = this.db.prepare(\"SELECT SUM(servicePrice) as revenue FROM appointments WHERE status = ?\").get(\"scheduled\");\n        const todayPendingRevenue = this.db.prepare(\"SELECT SUM(servicePrice) as revenue FROM appointments WHERE date = ? AND status = ?\").get(today, \"scheduled\");\n        const thisWeekPendingRevenue = this.db.prepare(\"SELECT SUM(servicePrice) as revenue FROM appointments WHERE date >= ? AND status = ?\").get(weekAgo, \"scheduled\");\n        return {\n            total: total.count,\n            today: todayCount.count,\n            thisWeek: thisWeekCount.count,\n            byStatus: statusCounts,\n            totalRevenue: totalRevenue.revenue || 0,\n            todayRevenue: todayRevenue.revenue || 0,\n            thisWeekRevenue: thisWeekRevenue.revenue || 0,\n            pendingRevenue: pendingRevenue.revenue || 0,\n            todayPendingRevenue: todayPendingRevenue.revenue || 0,\n            thisWeekPendingRevenue: thisWeekPendingRevenue.revenue || 0\n        };\n    }\n    // Close database connection\n    close() {\n        this.db.close();\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DatabaseManager);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDYSxPQUFPLENBQUMsd0ZBQXdGQyxHQUFHLENBQUNtRSxTQUFTO1FBRXBKLE9BQU87WUFDTEosT0FBT0EsTUFBTVcsS0FBSztZQUNsQlYsT0FBT0UsV0FBV1EsS0FBSztZQUN2Qk8sVUFBVWIsY0FBY00sS0FBSztZQUM3QkwsVUFBVUM7WUFDVkssY0FBY0EsYUFBYU8sT0FBTyxJQUFJO1lBQ3RDTixjQUFjQSxhQUFhTSxPQUFPLElBQUk7WUFDdENMLGlCQUFpQkEsZ0JBQWdCSyxPQUFPLElBQUk7WUFDNUNKLGdCQUFnQkEsZUFBZUksT0FBTyxJQUFJO1lBQzFDSCxxQkFBcUJBLG9CQUFvQkcsT0FBTyxJQUFJO1lBQ3BERix3QkFBd0JBLHVCQUF1QkUsT0FBTyxJQUFJO1FBQzVEO0lBQ0Y7SUFFQSw0QkFBNEI7SUFDckJDLFFBQWM7UUFDbkIsSUFBSSxDQUFDakcsRUFBRSxDQUFDaUcsS0FBSztJQUNmO0FBQ0Y7QUFFQSxpRUFBZTNHLGVBQWVBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maWZpLWhhaXItc2Fsb24vLi9saWIvZGF0YWJhc2UudHM/NGQ0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGF0YWJhc2UgZnJvbSAnYmV0dGVyLXNxbGl0ZTMnXG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCdcblxuLy8gRGF0YWJhc2UgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIEFwcG9pbnRtZW50IHtcbiAgaWQ6IHN0cmluZ1xuICBmaXJzdE5hbWU6IHN0cmluZ1xuICBsYXN0TmFtZTogc3RyaW5nXG4gIHNlcnZpY2U6IHN0cmluZ1xuICBzZXJ2aWNlUHJpY2U6IG51bWJlclxuICBkYXRlOiBzdHJpbmdcbiAgdGltZTogc3RyaW5nXG4gIHBob25lOiBzdHJpbmdcbiAgZW1haWw6IHN0cmluZ1xuICBub3Rlcz86IHN0cmluZ1xuICBzdGF0dXM6ICdzY2hlZHVsZWQnIHwgJ2NvbXBsZXRlZCcgfCAnY2FuY2VsbGVkJyB8ICduby1zaG93J1xuICBjcmVhdGVkQXQ6IHN0cmluZ1xuICB1cGRhdGVkQXQ6IHN0cmluZ1xufVxuXG4vLyBTZXJ2aWNlIHByaWNlIG1hcHBpbmdcbmNvbnN0IFNFUlZJQ0VfUFJJQ0VTOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAnYm94LWJyYWlkcyc6IDEyMCxcbiAgJ2Nvcm5yb3dzJzogODAsXG4gICdzZW5lZ2FsZXNlLXR3aXN0JzogMTUwLFxuICAnZ29kZGVzcy1icmFpZHMnOiAxODAsXG4gICdkcmVhZGxvY2tzJzogMjAwLFxuICAnaGFpci1zdHJhaWdodGVuaW5nJzogMTAwLFxuICAnd2VhdmUtc2V3aW5nJzogMjUwLFxuICAnd2FzaC1zZXQnOiA2MCxcbiAgJ3NpbGstcHJlc3MnOiA4MCxcbiAgJ2Fmcm8tc3R5bGluZyc6IDcwLFxuICAndXBkbyc6IDkwLFxuICAnY29sb3ItdHJlYXRtZW50JzogMTUwLFxuICAnaGFpci1jdXQnOiA1MCxcbiAgJ3RyaW0nOiAyNSxcbiAgJ2RlZXAtY29uZGl0aW9uaW5nJzogNDAsXG4gICdibG93b3V0JzogNDUsXG4gICdicmFpZC1yZW1vdmFsJzogMzAsXG4gICdoYWlyLWNvbnN1bHRhdGlvbic6IDI1XG59XG5cbi8vIERhdGFiYXNlIHV0aWxpdHkgY2xhc3Mgd2l0aCBzZWN1cml0eSBtZWFzdXJlc1xuY2xhc3MgRGF0YWJhc2VNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBkYjogRGF0YWJhc2UuRGF0YWJhc2VcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERhdGFiYXNlTWFuYWdlclxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gQ3JlYXRlIGRhdGFiYXNlIGluIGEgc2VjdXJlIGxvY2F0aW9uXG4gICAgY29uc3QgZGJQYXRoID0gam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScsICdhcHBvaW50bWVudHMuZGInKVxuICAgIFxuICAgIC8vIEVuc3VyZSBkYXRhIGRpcmVjdG9yeSBleGlzdHNcbiAgICBjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJylcbiAgICBjb25zdCBkYXRhRGlyID0gam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScpXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGRhdGFEaXIpKSB7XG4gICAgICBmcy5ta2RpclN5bmMoZGF0YURpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGRhdGFiYXNlIHdpdGggc2VjdXJpdHkgc2V0dGluZ3NcbiAgICB0aGlzLmRiID0gbmV3IERhdGFiYXNlKGRiUGF0aCwge1xuICAgICAgdmVyYm9zZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBjb25zb2xlLmxvZyA6IHVuZGVmaW5lZFxuICAgIH0pXG5cbiAgICAvLyBFbmFibGUgV0FMIG1vZGUgZm9yIGJldHRlciBjb25jdXJyZW5jeVxuICAgIHRoaXMuZGIucHJhZ21hKCdqb3VybmFsX21vZGUgPSBXQUwnKVxuICAgIFxuICAgIC8vIEVuYWJsZSBmb3JlaWduIGtleXNcbiAgICB0aGlzLmRiLnByYWdtYSgnZm9yZWlnbl9rZXlzID0gT04nKVxuICAgIFxuICAgIC8vIFNldCBzZWN1cmUgc2V0dGluZ3NcbiAgICB0aGlzLmRiLnByYWdtYSgnc2VjdXJlX2RlbGV0ZSA9IE9OJylcbiAgICBcbiAgICB0aGlzLmluaXRpYWxpemVUYWJsZXMoKVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBEYXRhYmFzZU1hbmFnZXIge1xuICAgIGlmICghRGF0YWJhc2VNYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICBEYXRhYmFzZU1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgRGF0YWJhc2VNYW5hZ2VyKClcbiAgICB9XG4gICAgcmV0dXJuIERhdGFiYXNlTWFuYWdlci5pbnN0YW5jZVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplVGFibGVzKCk6IHZvaWQge1xuICAgIC8vIENyZWF0ZSBhcHBvaW50bWVudHMgdGFibGUgd2l0aCBwcm9wZXIgY29uc3RyYWludHMgYW5kIHNlY3VyaXR5XG4gICAgY29uc3QgY3JlYXRlQXBwb2ludG1lbnRzVGFibGUgPSBgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBhcHBvaW50bWVudHMgKFxuICAgICAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgICAgICBmaXJzdE5hbWUgVEVYVCBOT1QgTlVMTCBDSEVDSyhsZW5ndGgoZmlyc3ROYW1lKSA+IDAgQU5EIGxlbmd0aChmaXJzdE5hbWUpIDw9IDUwKSxcbiAgICAgICAgbGFzdE5hbWUgVEVYVCBOT1QgTlVMTCBDSEVDSyhsZW5ndGgobGFzdE5hbWUpID4gMCBBTkQgbGVuZ3RoKGxhc3ROYW1lKSA8PSA1MCksXG4gICAgICAgIHNlcnZpY2UgVEVYVCBOT1QgTlVMTCBDSEVDSyhsZW5ndGgoc2VydmljZSkgPiAwIEFORCBsZW5ndGgoc2VydmljZSkgPD0gMTAwKSxcbiAgICAgICAgc2VydmljZVByaWNlIFJFQUwgTk9UIE5VTEwgQ0hFQ0soc2VydmljZVByaWNlID49IDApLFxuICAgICAgICBkYXRlIFRFWFQgTk9UIE5VTEwgQ0hFQ0soZGF0ZSBHTE9CICdbMC05XVswLTldWzAtOV1bMC05XS1bMC05XVswLTldLVswLTldWzAtOV0nKSxcbiAgICAgICAgdGltZSBURVhUIE5PVCBOVUxMIENIRUNLKHRpbWUgR0xPQiAnWzAtOV0qOlswLTldWzAtOV0gW0FQXU0nKSxcbiAgICAgICAgcGhvbmUgVEVYVCBOT1QgTlVMTCBDSEVDSyhsZW5ndGgocGhvbmUpID49IDEwIEFORCBsZW5ndGgocGhvbmUpIDw9IDIwKSxcbiAgICAgICAgZW1haWwgVEVYVCBOT1QgTlVMTCBDSEVDSyhlbWFpbCBMSUtFICclQCUnIEFORCBsZW5ndGgoZW1haWwpIDw9IDEwMCksXG4gICAgICAgIG5vdGVzIFRFWFQgQ0hFQ0sobGVuZ3RoKG5vdGVzKSA8PSA1MDApLFxuICAgICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdzY2hlZHVsZWQnIENIRUNLKHN0YXR1cyBJTiAoJ3NjaGVkdWxlZCcsICdjb21wbGV0ZWQnLCAnY2FuY2VsbGVkJywgJ25vLXNob3cnKSksXG4gICAgICAgIGNyZWF0ZWRBdCBURVhUIE5PVCBOVUxMIERFRkFVTFQgKGRhdGV0aW1lKCdub3cnKSksXG4gICAgICAgIHVwZGF0ZWRBdCBURVhUIE5PVCBOVUxMIERFRkFVTFQgKGRhdGV0aW1lKCdub3cnKSlcbiAgICAgIClcbiAgICBgXG5cbiAgICAvLyBDcmVhdGUgaW5kZXggZm9yIGJldHRlciBxdWVyeSBwZXJmb3JtYW5jZVxuICAgIGNvbnN0IGNyZWF0ZUluZGV4ZXMgPSBgXG4gICAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfYXBwb2ludG1lbnRzX2RhdGUgT04gYXBwb2ludG1lbnRzKGRhdGUpO1xuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2FwcG9pbnRtZW50c19zdGF0dXMgT04gYXBwb2ludG1lbnRzKHN0YXR1cyk7XG4gICAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfYXBwb2ludG1lbnRzX2VtYWlsIE9OIGFwcG9pbnRtZW50cyhlbWFpbCk7XG4gICAgYFxuXG4gICAgLy8gQ3JlYXRlIHRyaWdnZXIgdG8gYXV0b21hdGljYWxseSB1cGRhdGUgdXBkYXRlZEF0XG4gICAgY29uc3QgY3JlYXRlVHJpZ2dlciA9IGBcbiAgICAgIENSRUFURSBUUklHR0VSIElGIE5PVCBFWElTVFMgdXBkYXRlX2FwcG9pbnRtZW50c191cGRhdGVkX2F0XG4gICAgICBBRlRFUiBVUERBVEUgT04gYXBwb2ludG1lbnRzXG4gICAgICBCRUdJTlxuICAgICAgICBVUERBVEUgYXBwb2ludG1lbnRzIFNFVCB1cGRhdGVkQXQgPSBkYXRldGltZSgnbm93JykgV0hFUkUgaWQgPSBORVcuaWQ7XG4gICAgICBFTkRcbiAgICBgXG5cbiAgICB0aGlzLmRiLmV4ZWMoY3JlYXRlQXBwb2ludG1lbnRzVGFibGUpXG4gICAgdGhpcy5kYi5leGVjKGNyZWF0ZUluZGV4ZXMpXG4gICAgdGhpcy5kYi5leGVjKGNyZWF0ZVRyaWdnZXIpXG5cbiAgICAvLyBDaGVjayBpZiBzZXJ2aWNlUHJpY2UgY29sdW1uIGV4aXN0cywgaWYgbm90IGFkZCBpdFxuICAgIHRyeSB7XG4gICAgICB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCBzZXJ2aWNlUHJpY2UgRlJPTSBhcHBvaW50bWVudHMgTElNSVQgMScpLmdldCgpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIENvbHVtbiBkb2Vzbid0IGV4aXN0LCBhZGQgaXRcbiAgICAgIHRoaXMuZGIuZXhlYygnQUxURVIgVEFCTEUgYXBwb2ludG1lbnRzIEFERCBDT0xVTU4gc2VydmljZVByaWNlIFJFQUwgREVGQVVMVCAwJylcbiAgICAgIGNvbnNvbGUubG9nKCdBZGRlZCBzZXJ2aWNlUHJpY2UgY29sdW1uIHRvIGV4aXN0aW5nIGRhdGFiYXNlJylcbiAgICB9XG5cbiAgICAvLyBEYXRhYmFzZSBpcyByZWFkeSAtIG5vIHNhbXBsZSBkYXRhIG5lZWRlZFxuICB9XG5cblxuICAvLyBHZXQgc2VydmljZSBwcmljZSBmcm9tIHNlcnZpY2UgbmFtZVxuICBwcml2YXRlIGdldFNlcnZpY2VQcmljZShzZXJ2aWNlTmFtZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBub3JtYWxpemVkU2VydmljZSA9IHNlcnZpY2VOYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpXG4gICAgcmV0dXJuIFNFUlZJQ0VfUFJJQ0VTW25vcm1hbGl6ZWRTZXJ2aWNlXSB8fCAwXG4gIH1cblxuICAvLyBJbnB1dCB2YWxpZGF0aW9uIGFuZCBzYW5pdGl6YXRpb25cbiAgcHJpdmF0ZSB2YWxpZGF0ZUFwcG9pbnRtZW50KGRhdGE6IFBhcnRpYWw8QXBwb2ludG1lbnQ+KTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcnM6IHN0cmluZ1tdIH0ge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXVxuXG4gICAgaWYgKGRhdGEuZmlyc3ROYW1lICYmIChkYXRhLmZpcnN0TmFtZS5sZW5ndGggPT09IDAgfHwgZGF0YS5maXJzdE5hbWUubGVuZ3RoID4gNTApKSB7XG4gICAgICBlcnJvcnMucHVzaCgnRmlyc3QgbmFtZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNTAgY2hhcmFjdGVycycpXG4gICAgfVxuXG4gICAgaWYgKGRhdGEubGFzdE5hbWUgJiYgKGRhdGEubGFzdE5hbWUubGVuZ3RoID09PSAwIHx8IGRhdGEubGFzdE5hbWUubGVuZ3RoID4gNTApKSB7XG4gICAgICBlcnJvcnMucHVzaCgnTGFzdCBuYW1lIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA1MCBjaGFyYWN0ZXJzJylcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5zZXJ2aWNlICYmIChkYXRhLnNlcnZpY2UubGVuZ3RoID09PSAwIHx8IGRhdGEuc2VydmljZS5sZW5ndGggPiAxMDApKSB7XG4gICAgICBlcnJvcnMucHVzaCgnU2VydmljZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAwIGNoYXJhY3RlcnMnKVxuICAgIH1cblxuICAgIGlmIChkYXRhLnNlcnZpY2VQcmljZSAhPT0gdW5kZWZpbmVkICYmIChkYXRhLnNlcnZpY2VQcmljZSA8IDAgfHwgZGF0YS5zZXJ2aWNlUHJpY2UgPiAxMDAwMCkpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdTZXJ2aWNlIHByaWNlIG11c3QgYmUgYmV0d2VlbiAkMCBhbmQgJDEwLDAwMCcpXG4gICAgfVxuXG4gICAgaWYgKGRhdGEuZGF0ZSAmJiAhL15cXGR7NH0tXFxkezJ9LVxcZHsyfSQvLnRlc3QoZGF0YS5kYXRlKSkge1xuICAgICAgZXJyb3JzLnB1c2goJ0RhdGUgbXVzdCBiZSBpbiBZWVlZLU1NLUREIGZvcm1hdCcpXG4gICAgfVxuXG4gICAgaWYgKGRhdGEudGltZSAmJiAhL15cXGR7MSwyfTpcXGR7Mn0gW0FQXU0kLy50ZXN0KGRhdGEudGltZSkpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdUaW1lIG11c3QgYmUgaW4gSDpNTSBBTS9QTSBvciBISDpNTSBBTS9QTSBmb3JtYXQnKVxuICAgIH1cblxuICAgIGlmIChkYXRhLnBob25lICYmIChkYXRhLnBob25lLmxlbmd0aCA8IDEwIHx8IGRhdGEucGhvbmUubGVuZ3RoID4gMjApKSB7XG4gICAgICBlcnJvcnMucHVzaCgnUGhvbmUgbXVzdCBiZSBiZXR3ZWVuIDEwIGFuZCAyMCBjaGFyYWN0ZXJzJylcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5lbWFpbCAmJiAoIWRhdGEuZW1haWwuaW5jbHVkZXMoJ0AnKSB8fCBkYXRhLmVtYWlsLmxlbmd0aCA+IDEwMCkpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdFbWFpbCBtdXN0IGJlIHZhbGlkIGFuZCB1bmRlciAxMDAgY2hhcmFjdGVycycpXG4gICAgfVxuXG4gICAgaWYgKGRhdGEubm90ZXMgJiYgZGF0YS5ub3Rlcy5sZW5ndGggPiA1MDApIHtcbiAgICAgIGVycm9ycy5wdXNoKCdOb3RlcyBtdXN0IGJlIHVuZGVyIDUwMCBjaGFyYWN0ZXJzJylcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5zdGF0dXMgJiYgIVsnc2NoZWR1bGVkJywgJ2NvbXBsZXRlZCcsICdjYW5jZWxsZWQnLCAnbm8tc2hvdyddLmluY2x1ZGVzKGRhdGEuc3RhdHVzKSkge1xuICAgICAgZXJyb3JzLnB1c2goJ1N0YXR1cyBtdXN0IGJlIG9uZSBvZjogc2NoZWR1bGVkLCBjb21wbGV0ZWQsIGNhbmNlbGxlZCwgbm8tc2hvdycpXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzIH1cbiAgfVxuXG4gIC8vIFNhbml0aXplIGlucHV0IHRvIHByZXZlbnQgaW5qZWN0aW9uIGF0dGFja3NcbiAgcHJpdmF0ZSBzYW5pdGl6ZUlucHV0KGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBpbnB1dFxuICAgICAgLnJlcGxhY2UoL1s8Pl0vZywgJycpIC8vIFJlbW92ZSBwb3RlbnRpYWwgSFRNTCB0YWdzXG4gICAgICAucmVwbGFjZSgvWydcIl0vZywgJycpIC8vIFJlbW92ZSBxdW90ZXMgdGhhdCBjb3VsZCBicmVhayBTUUxcbiAgICAgIC50cmltKClcbiAgfVxuXG4gIC8vIEdldCBhbGwgYXBwb2ludG1lbnRzIHdpdGggb3B0aW9uYWwgZmlsdGVyaW5nXG4gIHB1YmxpYyBnZXRBcHBvaW50bWVudHMoZmlsdGVycz86IHsgZGF0ZT86IHN0cmluZzsgc3RhdHVzPzogc3RyaW5nIH0pOiBBcHBvaW50bWVudFtdIHtcbiAgICBsZXQgcXVlcnkgPSAnU0VMRUNUICogRlJPTSBhcHBvaW50bWVudHMnXG4gICAgY29uc3QgcGFyYW1zOiBhbnlbXSA9IFtdXG4gICAgY29uc3QgY29uZGl0aW9uczogc3RyaW5nW10gPSBbXVxuXG4gICAgaWYgKGZpbHRlcnM/LmRhdGUpIHtcbiAgICAgIGNvbmRpdGlvbnMucHVzaCgnZGF0ZSA9ID8nKVxuICAgICAgcGFyYW1zLnB1c2goZmlsdGVycy5kYXRlKVxuICAgIH1cblxuICAgIGlmIChmaWx0ZXJzPy5zdGF0dXMpIHtcbiAgICAgIGNvbmRpdGlvbnMucHVzaCgnc3RhdHVzID0gPycpXG4gICAgICBwYXJhbXMucHVzaChmaWx0ZXJzLnN0YXR1cylcbiAgICB9XG5cbiAgICBpZiAoY29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBxdWVyeSArPSAnIFdIRVJFICcgKyBjb25kaXRpb25zLmpvaW4oJyBBTkQgJylcbiAgICB9XG5cbiAgICBxdWVyeSArPSAnIE9SREVSIEJZIGRhdGUgQVNDLCB0aW1lIEFTQydcblxuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUocXVlcnkpXG4gICAgcmV0dXJuIHN0bXQuYWxsKC4uLnBhcmFtcykgYXMgQXBwb2ludG1lbnRbXVxuICB9XG5cbiAgLy8gR2V0IGFwcG9pbnRtZW50IGJ5IElEXG4gIHB1YmxpYyBnZXRBcHBvaW50bWVudEJ5SWQoaWQ6IHN0cmluZyk6IEFwcG9pbnRtZW50IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZSgnU0VMRUNUICogRlJPTSBhcHBvaW50bWVudHMgV0hFUkUgaWQgPSA/JylcbiAgICByZXR1cm4gc3RtdC5nZXQoaWQpIGFzIEFwcG9pbnRtZW50IHwgbnVsbFxuICB9XG5cbiAgLy8gQ3JlYXRlIG5ldyBhcHBvaW50bWVudFxuICBwdWJsaWMgY3JlYXRlQXBwb2ludG1lbnQoZGF0YTogT21pdDxBcHBvaW50bWVudCwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogeyBzdWNjZXNzOiBib29sZWFuOyBhcHBvaW50bWVudD86IEFwcG9pbnRtZW50OyBlcnJvcnM/OiBzdHJpbmdbXSB9IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy52YWxpZGF0ZUFwcG9pbnRtZW50KGRhdGEpXG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcnM6IHZhbGlkYXRpb24uZXJyb3JzIH1cbiAgICB9XG5cbiAgICAvLyBTYW5pdGl6ZSBpbnB1dHMgYW5kIHNldCBzZXJ2aWNlIHByaWNlXG4gICAgY29uc3Qgc2FuaXRpemVkRGF0YSA9IHtcbiAgICAgIC4uLmRhdGEsXG4gICAgICBmaXJzdE5hbWU6IHRoaXMuc2FuaXRpemVJbnB1dChkYXRhLmZpcnN0TmFtZSksXG4gICAgICBsYXN0TmFtZTogdGhpcy5zYW5pdGl6ZUlucHV0KGRhdGEubGFzdE5hbWUpLFxuICAgICAgc2VydmljZTogdGhpcy5zYW5pdGl6ZUlucHV0KGRhdGEuc2VydmljZSksXG4gICAgICBzZXJ2aWNlUHJpY2U6IGRhdGEuc2VydmljZVByaWNlIHx8IHRoaXMuZ2V0U2VydmljZVByaWNlKGRhdGEuc2VydmljZSksXG4gICAgICBwaG9uZTogdGhpcy5zYW5pdGl6ZUlucHV0KGRhdGEucGhvbmUpLFxuICAgICAgZW1haWw6IHRoaXMuc2FuaXRpemVJbnB1dChkYXRhLmVtYWlsKSxcbiAgICAgIG5vdGVzOiBkYXRhLm5vdGVzID8gdGhpcy5zYW5pdGl6ZUlucHV0KGRhdGEubm90ZXMpIDogbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICAgIElOU0VSVCBJTlRPIGFwcG9pbnRtZW50cyAoaWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIHNlcnZpY2UsIHNlcnZpY2VQcmljZSwgZGF0ZSwgdGltZSwgcGhvbmUsIGVtYWlsLCBub3Rlcywgc3RhdHVzLCBjcmVhdGVkQXQsIHVwZGF0ZWRBdClcbiAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KVxuICAgICAgYClcblxuICAgICAgc3RtdC5ydW4oXG4gICAgICAgIGlkLFxuICAgICAgICBzYW5pdGl6ZWREYXRhLmZpcnN0TmFtZSxcbiAgICAgICAgc2FuaXRpemVkRGF0YS5sYXN0TmFtZSxcbiAgICAgICAgc2FuaXRpemVkRGF0YS5zZXJ2aWNlLFxuICAgICAgICBzYW5pdGl6ZWREYXRhLnNlcnZpY2VQcmljZSxcbiAgICAgICAgc2FuaXRpemVkRGF0YS5kYXRlLFxuICAgICAgICBzYW5pdGl6ZWREYXRhLnRpbWUsXG4gICAgICAgIHNhbml0aXplZERhdGEucGhvbmUsXG4gICAgICAgIHNhbml0aXplZERhdGEuZW1haWwsXG4gICAgICAgIHNhbml0aXplZERhdGEubm90ZXMsXG4gICAgICAgIHNhbml0aXplZERhdGEuc3RhdHVzLFxuICAgICAgICBub3csXG4gICAgICAgIG5vd1xuICAgICAgKVxuXG4gICAgICBjb25zdCBhcHBvaW50bWVudCA9IHRoaXMuZ2V0QXBwb2ludG1lbnRCeUlkKGlkKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYXBwb2ludG1lbnQ6IGFwcG9pbnRtZW50ISB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yczogWydGYWlsZWQgdG8gY3JlYXRlIGFwcG9pbnRtZW50J10gfVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBhcHBvaW50bWVudFxuICBwdWJsaWMgdXBkYXRlQXBwb2ludG1lbnQoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxPbWl0PEFwcG9pbnRtZW50LCAnaWQnIHwgJ2NyZWF0ZWRBdCc+Pik6IHsgc3VjY2VzczogYm9vbGVhbjsgYXBwb2ludG1lbnQ/OiBBcHBvaW50bWVudDsgZXJyb3JzPzogc3RyaW5nW10gfSB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVBcHBvaW50bWVudChkYXRhKVxuICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3JzOiB2YWxpZGF0aW9uLmVycm9ycyB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYXBwb2ludG1lbnQgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmdldEFwcG9pbnRtZW50QnlJZChpZClcbiAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3JzOiBbJ0FwcG9pbnRtZW50IG5vdCBmb3VuZCddIH1cbiAgICB9XG5cbiAgICAvLyBTYW5pdGl6ZSBpbnB1dHNcbiAgICBjb25zdCBzYW5pdGl6ZWREYXRhID0geyAuLi5kYXRhIH1cbiAgICBpZiAoZGF0YS5maXJzdE5hbWUpIHNhbml0aXplZERhdGEuZmlyc3ROYW1lID0gdGhpcy5zYW5pdGl6ZUlucHV0KGRhdGEuZmlyc3ROYW1lKVxuICAgIGlmIChkYXRhLmxhc3ROYW1lKSBzYW5pdGl6ZWREYXRhLmxhc3ROYW1lID0gdGhpcy5zYW5pdGl6ZUlucHV0KGRhdGEubGFzdE5hbWUpXG4gICAgaWYgKGRhdGEuc2VydmljZSkgc2FuaXRpemVkRGF0YS5zZXJ2aWNlID0gdGhpcy5zYW5pdGl6ZUlucHV0KGRhdGEuc2VydmljZSlcbiAgICBpZiAoZGF0YS5waG9uZSkgc2FuaXRpemVkRGF0YS5waG9uZSA9IHRoaXMuc2FuaXRpemVJbnB1dChkYXRhLnBob25lKVxuICAgIGlmIChkYXRhLmVtYWlsKSBzYW5pdGl6ZWREYXRhLmVtYWlsID0gdGhpcy5zYW5pdGl6ZUlucHV0KGRhdGEuZW1haWwpXG4gICAgaWYgKGRhdGEubm90ZXMpIHNhbml0aXplZERhdGEubm90ZXMgPSB0aGlzLnNhbml0aXplSW5wdXQoZGF0YS5ub3RlcylcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyhzYW5pdGl6ZWREYXRhKS5tYXAoa2V5ID0+IGAke2tleX0gPSA/YCkuam9pbignLCAnKVxuICAgICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LnZhbHVlcyhzYW5pdGl6ZWREYXRhKVxuICAgICAgXG4gICAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBVUERBVEUgYXBwb2ludG1lbnRzIFNFVCAke2ZpZWxkc30gV0hFUkUgaWQgPSA/YClcbiAgICAgIHN0bXQucnVuKC4uLnZhbHVlcywgaWQpXG5cbiAgICAgIGNvbnN0IGFwcG9pbnRtZW50ID0gdGhpcy5nZXRBcHBvaW50bWVudEJ5SWQoaWQpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBhcHBvaW50bWVudDogYXBwb2ludG1lbnQhIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3I6JywgZXJyb3IpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3JzOiBbJ0ZhaWxlZCB0byB1cGRhdGUgYXBwb2ludG1lbnQnXSB9XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGFwcG9pbnRtZW50IHN0YXR1cyBvbmx5XG4gIHB1YmxpYyB1cGRhdGVBcHBvaW50bWVudFN0YXR1cyhpZDogc3RyaW5nLCBzdGF0dXM6ICdzY2hlZHVsZWQnIHwgJ2NvbXBsZXRlZCcgfCAnY2FuY2VsbGVkJyB8ICduby1zaG93Jyk6IHsgc3VjY2VzczogYm9vbGVhbjsgYXBwb2ludG1lbnQ/OiBBcHBvaW50bWVudDsgZXJyb3JzPzogc3RyaW5nW10gfSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoYFxuICAgICAgICBVUERBVEUgYXBwb2ludG1lbnRzIFxuICAgICAgICBTRVQgc3RhdHVzID0gPywgdXBkYXRlZEF0ID0gZGF0ZXRpbWUoJ25vdycpXG4gICAgICAgIFdIRVJFIGlkID0gP1xuICAgICAgYClcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc3RtdC5ydW4oc3RhdHVzLCBpZClcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5jaGFuZ2VzID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcnM6IFsnQXBwb2ludG1lbnQgbm90IGZvdW5kJ10gfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBhcHBvaW50bWVudCA9IHRoaXMuZ2V0QXBwb2ludG1lbnRCeUlkKGlkKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYXBwb2ludG1lbnQ6IGFwcG9pbnRtZW50ISB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yczogWydGYWlsZWQgdG8gdXBkYXRlIGFwcG9pbnRtZW50IHN0YXR1cyddIH1cbiAgICB9XG4gIH1cblxuICAvLyBEZWxldGUgYXBwb2ludG1lbnRcbiAgcHVibGljIGRlbGV0ZUFwcG9pbnRtZW50KGlkOiBzdHJpbmcpOiB7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9ycz86IHN0cmluZ1tdIH0ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKCdERUxFVEUgRlJPTSBhcHBvaW50bWVudHMgV0hFUkUgaWQgPSA/JylcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKGlkKVxuICAgICAgXG4gICAgICBpZiAocmVzdWx0LmNoYW5nZXMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yczogWydBcHBvaW50bWVudCBub3QgZm91bmQnXSB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBlcnJvcjonLCBlcnJvcilcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcnM6IFsnRmFpbGVkIHRvIGRlbGV0ZSBhcHBvaW50bWVudCddIH1cbiAgICB9XG4gIH1cblxuICAvLyBHZXQgYXBwb2ludG1lbnQgc3RhdGlzdGljc1xuICBwdWJsaWMgZ2V0U3RhdHMoKTogeyBcbiAgICB0b3RhbDogbnVtYmVyOyBcbiAgICB0b2RheTogbnVtYmVyOyBcbiAgICB0aGlzV2VlazogbnVtYmVyOyBcbiAgICBieVN0YXR1czogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgICB0b3RhbFJldmVudWU6IG51bWJlcjtcbiAgICB0b2RheVJldmVudWU6IG51bWJlcjtcbiAgICB0aGlzV2Vla1JldmVudWU6IG51bWJlcjtcbiAgICBwZW5kaW5nUmV2ZW51ZTogbnVtYmVyO1xuICAgIHRvZGF5UGVuZGluZ1JldmVudWU6IG51bWJlcjtcbiAgICB0aGlzV2Vla1BlbmRpbmdSZXZlbnVlOiBudW1iZXI7XG4gIH0ge1xuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5kYi5wcmVwYXJlKCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBhcHBvaW50bWVudHMnKS5nZXQoKSBhcyB7IGNvdW50OiBudW1iZXIgfVxuICAgIFxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cbiAgICBjb25zdCB0b2RheUNvdW50ID0gdGhpcy5kYi5wcmVwYXJlKCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBhcHBvaW50bWVudHMgV0hFUkUgZGF0ZSA9ID8nKS5nZXQodG9kYXkpIGFzIHsgY291bnQ6IG51bWJlciB9XG4gICAgXG4gICAgY29uc3Qgd2Vla0FnbyA9IG5ldyBEYXRlKERhdGUubm93KCkgLSA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXG4gICAgY29uc3QgdGhpc1dlZWtDb3VudCA9IHRoaXMuZGIucHJlcGFyZSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gYXBwb2ludG1lbnRzIFdIRVJFIGRhdGUgPj0gPycpLmdldCh3ZWVrQWdvKSBhcyB7IGNvdW50OiBudW1iZXIgfVxuICAgIFxuICAgIGNvbnN0IGJ5U3RhdHVzID0gdGhpcy5kYi5wcmVwYXJlKCdTRUxFQ1Qgc3RhdHVzLCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGFwcG9pbnRtZW50cyBHUk9VUCBCWSBzdGF0dXMnKS5hbGwoKSBhcyBBcnJheTx7IHN0YXR1czogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+XG4gICAgY29uc3Qgc3RhdHVzQ291bnRzID0gYnlTdGF0dXMucmVkdWNlKChhY2MsIHJvdykgPT4ge1xuICAgICAgYWNjW3Jvdy5zdGF0dXNdID0gcm93LmNvdW50XG4gICAgICByZXR1cm4gYWNjXG4gICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPilcblxuICAgIC8vIENvbXBsZXRlZCByZXZlbnVlIGNhbGN1bGF0aW9uc1xuICAgIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IHRoaXMuZGIucHJlcGFyZSgnU0VMRUNUIFNVTShzZXJ2aWNlUHJpY2UpIGFzIHJldmVudWUgRlJPTSBhcHBvaW50bWVudHMgV0hFUkUgc3RhdHVzID0gPycpLmdldCgnY29tcGxldGVkJykgYXMgeyByZXZlbnVlOiBudW1iZXIgfCBudWxsIH1cbiAgICBjb25zdCB0b2RheVJldmVudWUgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCBTVU0oc2VydmljZVByaWNlKSBhcyByZXZlbnVlIEZST00gYXBwb2ludG1lbnRzIFdIRVJFIGRhdGUgPSA/IEFORCBzdGF0dXMgPSA/JykuZ2V0KHRvZGF5LCAnY29tcGxldGVkJykgYXMgeyByZXZlbnVlOiBudW1iZXIgfCBudWxsIH1cbiAgICBjb25zdCB0aGlzV2Vla1JldmVudWUgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCBTVU0oc2VydmljZVByaWNlKSBhcyByZXZlbnVlIEZST00gYXBwb2ludG1lbnRzIFdIRVJFIGRhdGUgPj0gPyBBTkQgc3RhdHVzID0gPycpLmdldCh3ZWVrQWdvLCAnY29tcGxldGVkJykgYXMgeyByZXZlbnVlOiBudW1iZXIgfCBudWxsIH1cblxuICAgIC8vIFBlbmRpbmcgcmV2ZW51ZSBjYWxjdWxhdGlvbnMgKHNjaGVkdWxlZCBhcHBvaW50bWVudHMpXG4gICAgY29uc3QgcGVuZGluZ1JldmVudWUgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCBTVU0oc2VydmljZVByaWNlKSBhcyByZXZlbnVlIEZST00gYXBwb2ludG1lbnRzIFdIRVJFIHN0YXR1cyA9ID8nKS5nZXQoJ3NjaGVkdWxlZCcpIGFzIHsgcmV2ZW51ZTogbnVtYmVyIHwgbnVsbCB9XG4gICAgY29uc3QgdG9kYXlQZW5kaW5nUmV2ZW51ZSA9IHRoaXMuZGIucHJlcGFyZSgnU0VMRUNUIFNVTShzZXJ2aWNlUHJpY2UpIGFzIHJldmVudWUgRlJPTSBhcHBvaW50bWVudHMgV0hFUkUgZGF0ZSA9ID8gQU5EIHN0YXR1cyA9ID8nKS5nZXQodG9kYXksICdzY2hlZHVsZWQnKSBhcyB7IHJldmVudWU6IG51bWJlciB8IG51bGwgfVxuICAgIGNvbnN0IHRoaXNXZWVrUGVuZGluZ1JldmVudWUgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCBTVU0oc2VydmljZVByaWNlKSBhcyByZXZlbnVlIEZST00gYXBwb2ludG1lbnRzIFdIRVJFIGRhdGUgPj0gPyBBTkQgc3RhdHVzID0gPycpLmdldCh3ZWVrQWdvLCAnc2NoZWR1bGVkJykgYXMgeyByZXZlbnVlOiBudW1iZXIgfCBudWxsIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbDogdG90YWwuY291bnQsXG4gICAgICB0b2RheTogdG9kYXlDb3VudC5jb3VudCxcbiAgICAgIHRoaXNXZWVrOiB0aGlzV2Vla0NvdW50LmNvdW50LFxuICAgICAgYnlTdGF0dXM6IHN0YXR1c0NvdW50cyxcbiAgICAgIHRvdGFsUmV2ZW51ZTogdG90YWxSZXZlbnVlLnJldmVudWUgfHwgMCxcbiAgICAgIHRvZGF5UmV2ZW51ZTogdG9kYXlSZXZlbnVlLnJldmVudWUgfHwgMCxcbiAgICAgIHRoaXNXZWVrUmV2ZW51ZTogdGhpc1dlZWtSZXZlbnVlLnJldmVudWUgfHwgMCxcbiAgICAgIHBlbmRpbmdSZXZlbnVlOiBwZW5kaW5nUmV2ZW51ZS5yZXZlbnVlIHx8IDAsXG4gICAgICB0b2RheVBlbmRpbmdSZXZlbnVlOiB0b2RheVBlbmRpbmdSZXZlbnVlLnJldmVudWUgfHwgMCxcbiAgICAgIHRoaXNXZWVrUGVuZGluZ1JldmVudWU6IHRoaXNXZWVrUGVuZGluZ1JldmVudWUucmV2ZW51ZSB8fCAwXG4gICAgfVxuICB9XG5cbiAgLy8gQ2xvc2UgZGF0YWJhc2UgY29ubmVjdGlvblxuICBwdWJsaWMgY2xvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5kYi5jbG9zZSgpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YWJhc2VNYW5hZ2VyXG4iXSwibmFtZXMiOlsiRGF0YWJhc2UiLCJqb2luIiwiU0VSVklDRV9QUklDRVMiLCJEYXRhYmFzZU1hbmFnZXIiLCJkYlBhdGgiLCJwcm9jZXNzIiwiY3dkIiwiZnMiLCJyZXF1aXJlIiwiZGF0YURpciIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJkYiIsInZlcmJvc2UiLCJjb25zb2xlIiwibG9nIiwidW5kZWZpbmVkIiwicHJhZ21hIiwiaW5pdGlhbGl6ZVRhYmxlcyIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJjcmVhdGVBcHBvaW50bWVudHNUYWJsZSIsImNyZWF0ZUluZGV4ZXMiLCJjcmVhdGVUcmlnZ2VyIiwiZXhlYyIsInByZXBhcmUiLCJnZXQiLCJlcnJvciIsImdldFNlcnZpY2VQcmljZSIsInNlcnZpY2VOYW1lIiwibm9ybWFsaXplZFNlcnZpY2UiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ2YWxpZGF0ZUFwcG9pbnRtZW50IiwiZGF0YSIsImVycm9ycyIsImZpcnN0TmFtZSIsImxlbmd0aCIsInB1c2giLCJsYXN0TmFtZSIsInNlcnZpY2UiLCJzZXJ2aWNlUHJpY2UiLCJkYXRlIiwidGVzdCIsInRpbWUiLCJwaG9uZSIsImVtYWlsIiwiaW5jbHVkZXMiLCJub3RlcyIsInN0YXR1cyIsImlzVmFsaWQiLCJzYW5pdGl6ZUlucHV0IiwiaW5wdXQiLCJ0cmltIiwiZ2V0QXBwb2ludG1lbnRzIiwiZmlsdGVycyIsInF1ZXJ5IiwicGFyYW1zIiwiY29uZGl0aW9ucyIsInN0bXQiLCJhbGwiLCJnZXRBcHBvaW50bWVudEJ5SWQiLCJpZCIsImNyZWF0ZUFwcG9pbnRtZW50IiwidmFsaWRhdGlvbiIsInN1Y2Nlc3MiLCJzYW5pdGl6ZWREYXRhIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0ciIsInRvSVNPU3RyaW5nIiwicnVuIiwiYXBwb2ludG1lbnQiLCJ1cGRhdGVBcHBvaW50bWVudCIsImV4aXN0aW5nIiwiZmllbGRzIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsInZhbHVlcyIsInVwZGF0ZUFwcG9pbnRtZW50U3RhdHVzIiwicmVzdWx0IiwiY2hhbmdlcyIsImRlbGV0ZUFwcG9pbnRtZW50IiwiZ2V0U3RhdHMiLCJ0b3RhbCIsInRvZGF5Iiwic3BsaXQiLCJ0b2RheUNvdW50Iiwid2Vla0FnbyIsInRoaXNXZWVrQ291bnQiLCJieVN0YXR1cyIsInN0YXR1c0NvdW50cyIsInJlZHVjZSIsImFjYyIsInJvdyIsImNvdW50IiwidG90YWxSZXZlbnVlIiwidG9kYXlSZXZlbnVlIiwidGhpc1dlZWtSZXZlbnVlIiwicGVuZGluZ1JldmVudWUiLCJ0b2RheVBlbmRpbmdSZXZlbnVlIiwidGhpc1dlZWtQZW5kaW5nUmV2ZW51ZSIsInRoaXNXZWVrIiwicmV2ZW51ZSIsImNsb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/tslib","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fstats%2Froute&page=%2Fapi%2Fadmin%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fstats%2Froute.ts&appDir=%2FUsers%2Fsurafellemma%2FDesktop%2FFifi%20Hair%20Salon%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurafellemma%2FDesktop%2FFifi%20Hair%20Salon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();