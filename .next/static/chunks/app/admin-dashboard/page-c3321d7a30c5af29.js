(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{3702:function(e,t,s){Promise.resolve().then(s.bind(s,2106))},2106:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var l=s(7437),a=s(6463),n=s(2265);function r(){let e=(0,a.useRouter)(),[t,s]=(0,n.useState)([]),[r,c]=(0,n.useState)(null),[i,o]=(0,n.useState)(!0),[d,x]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[h,p]=(0,n.useState)("all");(0,n.useEffect)(()=>{b(),f()},[]),(0,n.useEffect)(()=>{b()},[u,h]),(0,n.useEffect)(()=>{let e=setInterval(()=>{b(),f()},3e4);return()=>clearInterval(e)},[u,h]);let b=async()=>{try{let e=new URLSearchParams;u&&e.append("date",u),"all"!==h&&e.append("status",h);let t=await fetch("/api/admin/appointments?".concat(e.toString())),l=await t.json();t.ok?s(l.appointments||[]):x(l.error||"Failed to fetch appointments")}catch(e){x("Network error. Please try again.")}finally{o(!1)}},f=async()=>{try{let e=await fetch("/api/admin/stats"),t=await e.json();e.ok&&c(t.stats)}catch(e){console.error("Failed to fetch stats:",e)}},g=async(e,t)=>{try{let s=await fetch("/api/admin/appointments",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:t})});if(s.ok)b(),f();else{let e=await s.json();x(e.error||"Failed to update appointment status")}}catch(e){x("Network error. Please try again.")}},j=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return i?(0,l.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-pink-light to-green-light flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-muted",children:"Loading dashboard..."})]})}):(0,l.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-pink-light to-green-light p-4",children:(0,l.jsxs)("div",{className:"container max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft ring-1 ring-accent/20 mb-6 relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-accent/10 rounded-full blur-3xl"}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-accent/10 rounded-full blur-2xl"}),(0,l.jsxs)("div",{className:"relative z-10 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"font-serif text-3xl text-ink mb-2",children:"Admin Dashboard"}),(0,l.jsx)("p",{className:"text-muted",children:"Manage your salon appointments"})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>{b(),f()},className:"px-4 py-2 rounded-full border border-green-accent/30 text-green-accent hover:bg-green-accent/10 transition-colors",children:"\uD83D\uDD04 Refresh"}),(0,l.jsx)("button",{onClick:()=>{e.push("/")},className:"px-4 py-2 rounded-full border border-accent/30 text-accent hover:bg-accent/10 transition-colors",children:"Back to Home"})]})]})]}),d&&(0,l.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-2xl",children:(0,l.jsx)("p",{className:"text-red-800 text-center",children:d})}),(0,l.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft ring-1 ring-accent/20",children:[(0,l.jsx)("h3",{className:"font-serif text-xl text-ink mb-2",children:"Today's Appointments"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-accent",children:(null==r?void 0:r.today)||0}),(0,l.jsx)("p",{className:"text-sm text-muted",children:j(new Date().toISOString().split("T")[0])})]}),(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft ring-1 ring-accent/20",children:[(0,l.jsx)("h3",{className:"font-serif text-xl text-ink mb-2",children:"Completed Revenue"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-green-accent",children:["$",((null==r?void 0:r.totalRevenue)||0).toLocaleString()]}),(0,l.jsx)("p",{className:"text-sm text-muted",children:"From completed services"})]}),(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft ring-1 ring-accent/20",children:[(0,l.jsx)("h3",{className:"font-serif text-xl text-ink mb-2",children:"Pending Revenue"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-orange-500",children:["$",((null==r?void 0:r.pendingRevenue)||0).toLocaleString()]}),(0,l.jsx)("p",{className:"text-sm text-muted",children:"From scheduled appointments"})]}),(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft ring-1 ring-accent/20",children:[(0,l.jsx)("h3",{className:"font-serif text-xl text-ink mb-2",children:"This Week's Revenue"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-green-dark",children:["$",((null==r?void 0:r.thisWeekRevenue)||0).toLocaleString()]}),(0,l.jsx)("p",{className:"text-sm text-muted",children:"Completed this week"})]})]}),(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft ring-1 ring-accent/20 mb-6",children:[(0,l.jsx)("h3",{className:"font-serif text-xl text-ink mb-4",children:"Filters"}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Date"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"date",value:u,onChange:e=>m(e.target.value),className:"flex-1 rounded-full border border-accent/30 px-4 py-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-accent"}),(0,l.jsx)("button",{type:"button",onClick:()=>m(""),className:"px-4 py-2 rounded-full border border-accent/30 text-accent hover:bg-accent/10 transition-colors whitespace-nowrap",children:"Show All"})]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Status"}),(0,l.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full rounded-full border border-accent/30 px-4 py-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-accent",children:[(0,l.jsx)("option",{value:"all",children:"All Statuses"}),(0,l.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,l.jsx)("option",{value:"completed",children:"Completed"}),(0,l.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,l.jsx)("option",{value:"no-show",children:"No Show"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-soft ring-1 ring-accent/20",children:[(0,l.jsxs)("h3",{className:"font-serif text-xl text-ink mb-4",children:["Appointments ","all"!==h?"(".concat(h,")"):""," ",u?"for ".concat(j(u)):"(All dates)"]}),0===t.length?(0,l.jsx)("p",{className:"text-muted text-center py-8",children:"No appointments found with the current filters."}):(0,l.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,l.jsx)("div",{className:"border border-accent/20 rounded-2xl p-4 hover:shadow-md transition-shadow",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsxs)("h4",{className:"font-serif text-lg text-ink",children:[e.firstName," ",e.lastName]}),(0,l.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("scheduled"===e.status?"bg-blue-100 text-blue-800":"completed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status.replace("-"," ").toUpperCase()})]}),(0,l.jsxs)("p",{className:"text-muted",children:[e.service," • $",e.servicePrice]}),(0,l.jsxs)("p",{className:"text-sm text-muted",children:[e.time," • ",e.phone," • ",e.email]}),e.notes&&(0,l.jsxs)("p",{className:"text-sm text-muted mt-2 italic",children:["Notes: ",e.notes]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("p",{className:"text-sm text-muted",children:["Booked: ",new Date(e.createdAt).toLocaleDateString()]}),(0,l.jsxs)("p",{className:"text-xs text-muted",children:["Updated: ",new Date(e.updatedAt).toLocaleDateString()]}),(0,l.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:["completed"!==e.status&&(0,l.jsx)("button",{onClick:()=>g(e.id,"completed"),className:"px-3 py-1 text-xs bg-green-100 text-green-800 rounded-full hover:bg-green-200 transition-colors",children:"✓ Mark Complete"}),"scheduled"!==e.status&&(0,l.jsx)("button",{onClick:()=>g(e.id,"scheduled"),className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200 transition-colors",children:"↩ Mark Pending"}),"cancelled"!==e.status&&(0,l.jsx)("button",{onClick:()=>g(e.id,"cancelled"),className:"px-3 py-1 text-xs bg-red-100 text-red-800 rounded-full hover:bg-red-200 transition-colors",children:"✕ Cancel"}),"no-show"!==e.status&&(0,l.jsx)("button",{onClick:()=>g(e.id,"no-show"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-800 rounded-full hover:bg-gray-200 transition-colors",children:"\uD83D\uDC7B No Show"})]})]})]})},e.id))})]})]})})}},6463:function(e,t,s){"use strict";var l=s(1169);s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3702)}),_N_E=e.O()}]);